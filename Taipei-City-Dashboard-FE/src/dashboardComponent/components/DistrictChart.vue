<!-- Developed by Taipei Urban Intelligence Center 2023-2024-->

<script setup>
import { computed, ref } from "vue";
import { districtCoordinates } from "../utilities/districtCoordinates";

const props = defineProps([
	"chart_config",
	"activeChart",
	"activeCity",
	"series",
	"map_config",
	"map_filter",
	"map_filter_on",
]);

const emits = defineEmits([
	"filterByParam",
	"filterByLayer",
	"clearByParamFilter",
	"clearByLayerFilter",
	"fly"
]);

const targetDistrict = ref(null);
const districtColor = ref(props.chart_config.color[0]);
const mousePosition = ref({ x: null, y: null });
const selectedIndex = ref(null);

const cities = [
	{ name: "臺北市", value: "taipei" },
	{ name: "新北市", value: "newtaipei" },
	{ name: "雙北市", value: "metrotaipei" },
]

const cityName = computed(() => {
	if (!props.activeCity) return "metrotaipei"

	return cities.find(city => city.value === props.activeCity)?.name
});

const districts = [
	"北投區",
	"士林區",
	"內湖區",
	"南港區",
	"松山區",
	"信義區",
	"中山區",
	"大同區",
	"中正區",
	"萬華區",
	"大安區",
	"文山區",
	"新莊區",
	"淡水區",
	"汐止區",
	"板橋區",
	"三重區",
	"樹林區",
	"土城區",
	"蘆洲區",
	"中和區",
	"永和區",
	"新店區",
	"鶯歌區",
	"三峽區",
	"瑞芳區",
	"五股區",
	"泰山區",
	"林口區",
	"深坑區",
	"石碇區",
	"坪林區",
	"三芝區",
	"石門區",
	"八里區",
	"平溪區",
	"雙溪區",
	"貢寮區",
	"金山區",
	"萬里區",
	"烏來區",
];

// Parse District Data (to support 2D or 3D data)
const districtData = computed(() => {
	let output = {
		北投區: 0,
		士林區: 0,
		內湖區: 0,
		南港區: 0,
		松山區: 0,
		信義區: 0,
		中山區: 0,
		大同區: 0,
		中正區: 0,
		萬華區: 0,
		大安區: 0,
		文山區: 0,
		新莊區: 0,
		淡水區: 0,
		汐止區: 0,
		板橋區: 0,
		三重區: 0,
		樹林區: 0,
		土城區: 0,
		蘆洲區: 0,
		中和區: 0,
		永和區: 0,
		新店區: 0,
		鶯歌區: 0,
		三峽區: 0,
		瑞芳區: 0,
		五股區: 0,
		泰山區: 0,
		林口區: 0,
		深坑區: 0,
		石碇區: 0,
		坪林區: 0,
		三芝區: 0,
		石門區: 0,
		八里區: 0,
		平溪區: 0,
		雙溪區: 0,
		貢寮區: 0,
		金山區: 0,
		萬里區: 0,
		烏來區: 0,
		highest: 0,
		sum: 0,
	};
	let highest = 0;
	let sum = 0;
	if (props.series.length === 1) {
		props.series[0].data.forEach((item) => {
			output[item.x] = item.y;
			if (item.y > highest) {
				highest = item.y;
			}
			sum += item.y;
		});
	} else {
		props.series.forEach((serie) => {
			for (let i = 0; i < props.chart_config.categories.length; i++) {
				if (!output[props.chart_config.categories[i]]) {
					output[props.chart_config.categories[i]] = 0;
				}
				output[props.chart_config.categories[i]] += +serie.data[i];
			}
		});
		highest = Object.values(output).sort(function (a, b) {
			return b - a;
		})[0];
		sum = Object.values(output).reduce(
			(partialSum, a) => partialSum + a,
			0
		);
	}

	output.highest = highest;
	output.sum = sum;

	return output;
});
const tooltipPosition = computed(() => {
	if (!mousePosition.value.x || !mousePosition.value.y) {
		return {
			left: "-1000px",
			top: "-1000px",
		};
	}
	return {
		left: `${mousePosition.value.x - 10}px`,
		top: `${mousePosition.value.y - 54}px`,
	};
});

function toggleActive(e) {
	targetDistrict.value = e.target.dataset.name;
}
function toggleActiveToNull() {
	targetDistrict.value = null;
}
function updateMouseLocation(e) {
	mousePosition.value.x = e.pageX;
	mousePosition.value.y = e.pageY;
}

function handleDataSelection(index) {
	if (!props.map_filter || !props.map_filter_on) {
		return;
	}

	if (index !== selectedIndex.value) {
		// Supports filtering by xAxis
		emits("fly", districtCoordinates[index]);
		if (props.map_filter.mode === "byParam") {
			emits(
				"filterByParam",
				props.map_filter,
				props.map_config,
				districts[index],
				null
			);
		}
		// Supports filtering by xAxis
		else if (props.map_filter.mode === "byLayer") {
			emits("filterByLayer", props.map_config, districts[index]);
		}
		selectedIndex.value = index;
	} else {
		if (props.map_filter.mode === "byParam") {
			emits("clearByParamFilter", props.map_config);
		} else if (props.map_filter.mode === "byLayer") {
			emits("clearByLayerFilter", props.map_config);
		}
		selectedIndex.value = null;
	}
}
</script>


<template>
  <div
    v-if="activeChart === 'DistrictChart'"
    class="districtchart"
  >
    <div class="districtchart-title">
      <h5>總合</h5>
      <h6>{{ districtData.sum }} {{ chart_config.unit }}</h6>
      <div class="districtchart-title-legend">
        <p>多</p>
        <div
          :style="{ backgroundColor: props.chart_config.color[0] }"
        />
        <p>少</p>
      </div>
    </div>
    <div class="districtchart-chart">
      <svg
        v-if="cityName === '新北市' || cityName === '雙北市'"
        class="districtchart-chart-metrotaipei"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 970 611"
      >
        <g
          class="districtchart-chart-district-taipei"
        >
          <path
            data-city="新北市"
            data-name="新莊區"
            :class="{
              'active-district':
                targetDistrict === '新莊區' ||
                selectedIndex === 12,
              'initial-animation-14': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['新莊區'] / districtData.highest)"
            :fill="districtColor"
            d="M304 289.9 302.9 288.5 301.5 285.9 300.1 284.4 299.5 284.8 299.2 282.7 298.9 282 297.3 280.6 296.7 279.2 296.5 277.3 294.5 276 294.2 275.6 293.9 275.5 292.2 274.6 288.5 274.5 286.9 273.7 286.3 274.5 285.7 274.2 285.5 272.9 283.6 273.2 280.4 270.7 279.8 269.3 277.5 267.6 277.1 265.5 275.1 264.6 275.5 261.2 278.4 261.8 276.6 259.8 277.7 259.4 277.1 257.2 271.7 255.2 270.9 253.3 269.6 253.3 270 253 274.2 252.7 278.7 251 283.4 252.1 284.4 253 283.6 255.3 285.4 255.7 285 256.1 286.9 257.6 286.3 260.6 288.8 261.2 290.4 261.3 291 261.8 289.6 265 291.6 265.4 294.2 266.8 295 265.4 296.1 266.4 299.6 265.2 297.5 263.4 298.5 262.6 301 259.6 302.9 256.5 304.2 255.2 306.3 256.7 307.8 257.5 308.4 253.5 310.6 254.9 312.4 254.4 312.3 250.9 311 249.3 312.1 248.8 312 247.1 311 243.5 310.4 243.5 310.5 243 309.8 240.6 310 240.3 313.8 238.9 317.6 236.7 317.6 235.5 318.9 236.7 320 235.7 321.4 233.5 322.8 234 326.9 229.1 327.4 229.4 329.6 229.1 330.9 229.9 331.7 231.6 331.2 233.6 332.1 236.5 333.2 238.2 333.1 239.3 333.5 241.4 334.2 243.4 333.2 246.8 332.9 249.1 331.8 252 332 253.1 332.1 253.3 332.2 256.7 328.3 258.4 324.8 260.6 322.8 261.9 321.6 262.8 321 263.3 320.4 263.8 317.6 266.9 314.8 271.1 312.1 276.1 308.6 281.4 307.4 284.9 307 288.6 306.9 292 306.2 292.9 305.8 292.6 303.1 293.6 304 289.9 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(12)"
          />
          <path
            data-city="新北市"
            data-name="淡水區"
            :class="{
              'active-district':
                targetDistrict === '淡水區' ||
                selectedIndex === 13,
              'initial-animation-3': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['淡水區'] / districtData.highest)"
            :fill="districtColor"
            d="M326.8 176.1 325.3 174.3 324.7 171 323.9 166.5 323.1 162.2 322.9 161.5 322.4 159.3 321.5 154.9 320.4 151.2 318.8 147.7 315.7 143.8 312.2 140.3 308.3 137.4 305.6 135.3 303.8 134.4 303.4 134.2 298.3 131.9 298 131.7 291.7 127.7 292.8 126 290.4 122.5 284.3 121.3 280.3 120.3 280.5 117.7 280 116.9 280.6 114.7 284.6 114 286.5 114.7 290 113.9 290.6 113.2 292.8 113.2 291.8 110.2 292.6 109.6 294.4 106.8 296.4 103.9 297.6 100.7 300.3 98.6 300.8 97 302.7 97.1 301.5 96.1 303.5 93.1 304.9 90 307.3 89.2 310.1 87.1 311.4 84.6 311.4 83 310.4 82.1 310.8 80.4 311.2 79 313.5 75.7 314.8 76.5 316 74.3 314.7 73.2 315.3 70.9 315.1 69.7 316.8 65.8 317.1 64.4 319.1 63.3 322.7 63.6 324.3 64.3 324.7 66.1 326.1 67.1 328.5 67.3 330.4 68.3 334.1 68.2 335.2 67.6 336.4 68.5 340 69.5 343.2 71.3 345.9 72.1 352.9 75.2 354.2 75 358.2 76.2 359 77 357.8 79 358.5 80.8 361 81.3 362.4 82.6 361.5 83.8 359.3 83.2 359.5 84 357.7 82.6 358.1 86.9 359.7 89.8 359.3 91 358 90.3 355.4 92.8 353.8 91.8 353.5 93.5 352 93.9 350 93.4 348.1 97 349.4 98.6 348 99.6 351.4 102.3 351.5 104 348.7 105.4 348.7 107.8 353.6 108.6 355.1 109.7 355.1 111.5 356.7 111.8 357.4 113.8 362.2 111.9 363.3 112.1 363.8 113.8 366.6 114.4 367.6 115.5 367.5 116.9 369.7 116.9 371.5 119 374.4 120.8 377.7 121.7 379.6 124.6 380.3 128.3 378.5 132.7 377.8 132.9 375.4 132.5 373.3 131.4 371.4 132.8 367.8 131.3 366.6 131.3 366.9 128.8 365.5 128.4 363.4 129.9 362.3 131.8 362.4 133.4 360.5 135.6 360.1 137.9 357.7 139.1 354.6 141.8 353.9 143.7 350.9 148 350 150.6 347.5 150.4 345.8 152.3 345.4 153.7 341.5 157.3 340.6 159.4 337.6 161.6 337.1 163.5 336.3 164.1 334.9 164.8 332.1 168.3 330.2 170 331 175.2 330.9 175.7 326.9 177 326.8 176.1 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(13)"
          />
          <path
            data-city="新北市"
            data-name="汐止區"
            :class="{
              'active-district':
                targetDistrict === '汐止區' ||
                selectedIndex === 14,
              'initial-animation-20': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['汐止區'] / districtData.highest)"
            :fill="districtColor"
            d="M486.8 265.7 481.3 262.8 479.5 261.2 476.2 260.1 475.4 259 473.1 259.6 472.9 258.7 469.5 257.1 468.5 257.2 467.4 256.1 464.8 253.5 462 248.6 461.8 247.4 461.6 245.3 465 243 465.4 240.9 467.6 239.6 464.7 234.6 461.6 232.9 462.8 231.1 462.6 230.1 463.2 229.9 465.9 227.7 465.8 226 465.1 224.6 465.8 223.7 467.1 224.8 467.2 220.7 468 217.8 469.2 216.4 471.3 215.3 470.9 213.3 471.2 211.3 471.6 209.9 469.6 207.8 469.9 207.1 468.9 204.9 469.9 203 468.6 201.2 466.9 201.5 465.4 199.9 462.2 197.7 460.6 195.2 457.2 194.3 455.1 193.3 454.2 191.8 452.3 191.8 448.5 190.6 447.3 190.7 445.1 189.6 443.6 186 444.7 184.6 446.3 180.5 448 178.9 448.9 175.1 450.7 175.1 453.7 172 454.3 169.8 460.8 164.9 461.6 163.6 463 163.7 465.9 162.1 467.5 161.8 469.5 162.2 470.5 165.8 471.8 166.5 472.1 167.7 474 168.7 474.6 170.1 476.6 171 478.9 170.7 481.5 171.8 483.8 174 484.7 177 484.7 178.4 485.9 179.3 485.6 181 486.2 186.5 489.7 190.7 490.9 194.1 491 195.1 488.9 196.2 488.5 197.7 489.6 198.8 489.9 200.5 494.2 204 494 205.5 495.8 206.2 497.1 207.8 498.6 208.2 499.5 209.6 501.8 210 504.6 213 510.1 215.7 511.5 214.8 514.1 211.8 515.5 210.8 516.2 211.6 516.2 213.2 514.6 213.8 515.1 216.3 513.8 218.7 515.2 220.9 518.2 222.9 523.1 226.6 525.6 227.6 528.8 227.8 530.8 229.5 532 230.4 535.7 229.9 537.5 231.1 541.6 229.9 542.6 229.9 544.6 231.1 547.1 233.7 548.6 236.2 550.7 238.5 553.8 238.8 557.2 243.3 555 245.9 555 246.4 553.5 247.2 551.2 247.5 549.9 248.5 547.2 252.5 545.4 253.8 546.1 256.4 545.2 259.1 543.3 260.2 542.5 261.4 539.3 260.7 538.7 261.4 535.3 262.6 534 260.9 532.2 260.8 530.1 259.9 529.1 258.5 529.7 257.1 529 254.5 525.9 253.4 522.5 253.6 520.5 254.9 518.7 255.1 516.6 256.7 516.6 257.2 513.7 258.6 513 259.6 512.6 260 510.5 260 508.1 260.7 507.2 262 502.7 261 502.7 264.9 502.2 265.1 499 264.1 493.7 266.8 490.1 266.9 486.8 265.7 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(14)"
          />
          <path
            data-city="新北市"
            data-name="板橋區"
            :class="{
              'active-district':
                targetDistrict === '板橋區' ||
                selectedIndex === 15,
              'initial-animation-23': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['板橋區'] / districtData.highest)"
            :fill="districtColor"
            d="M299.4 318.6 299.8 313.8 298.7 312.5 298.7 312.1 299.4 311 299.3 308.2 298.3 306.9 297.5 305.5 297.6 304.5 298.7 302.8 300.4 301.3 300.5 300.2 302.1 298.3 303 297.1 302.9 295.3 303.6 294.5 305.6 293.7 306.4 294.3 307.8 292.3 308 288.6 308.4 285.1 309.5 281.9 313 276.6 315.7 271.6 318.4 267.5 321.1 264.5 321.7 264 322.2 263.6 323.4 262.7 325.3 261.4 328.8 259.3 332.8 257.5 337.4 256.7 337.6 256.7 343.1 256.3 345.2 256.8 348.2 256.9 346.8 259.6 347.3 262.4 349 266.2 350 267.9 351.5 271.2 351.3 275.6 351.5 277.6 348.1 278.2 345.4 278.8 346 280.3 345.3 281.4 345.6 282.3 343.1 282.3 340.3 282.8 338.1 285.6 337.4 286.2 336.8 286.6 336.6 286.5 333.7 288.9 333.6 289.4 333.5 290.2 332.7 290.7 332.1 290.4 332.2 291.4 332.4 292.9 331.8 294.5 331.3 295.7 331.1 295.6 329.9 297.2 332.5 300.5 332.8 300.5 332.6 301.7 332 302.1 330.2 302.8 328.5 303 328.2 302.4 327.7 301.4 327.2 301.7 325.2 301 324.7 299 324.6 296 322.6 297 321.5 300.1 321.1 301.1 318.7 299.4 315.3 300.6 314.1 301.2 312.7 299.4 311.3 300.3 310.2 300.4 310 303.1 309.8 304.4 309.7 304.8 308.4 306 307.6 308.2 305.6 310.6 305 315.4 304.6 316.1 300.6 319.1 299.4 318.6 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(15)"
          />
          <path
            data-city="新北市"
            data-name="三重區"
            :class="{
              'active-district':
                targetDistrict === '三重區' ||
                selectedIndex === 16,
              'initial-animation-15': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['三重區'] / districtData.highest)"
            :fill="districtColor"
            d="M333.1 253.2 333 252.8 332.9 252.1 333.9 249.3 334.2 247 335.3 243.4 334.4 241.2 334.1 239.2 334.2 238 333 236.1 332.3 233.6 332.6 231.7 334.6 229.8 336.2 229 336.3 224.7 336.7 224.6 339.2 225.7 341.2 223.8 341.4 223.2 342.4 220.9 344.1 219.9 345.4 218.2 347.1 215.2 347.8 214.2 348.2 212.8 348.2 212.6 348.3 210.1 349.3 209.1 350.1 207.9 351.9 206.7 354.1 204.6 359.4 209.7 361.6 212.3 362.1 213.3 362.5 214 365.1 220.2 366 222.4 366.8 224.9 367 226.6 367.1 227.7 367 229.5 366.7 233.3 366.2 235.4 366.7 240.3 366.6 242 365.2 246.3 364.3 247.3 362.9 248.7 361.1 250.6 358.1 252.1 357.7 252.5 350.9 253.4 348.8 255.9 345.4 255.8 343.1 255.3 337.3 255.8 333.2 256.5 333.1 253.2 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(16)"
          />
          <path
            data-city="新北市"
            data-name="樹林區"
            :class="{
              'active-district':
                targetDistrict === '樹林區' ||
                selectedIndex === 17,
              'initial-animation-22': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['樹林區'] / districtData.highest)"
            :fill="districtColor"
            d="M273.6 346.5 273.1 345.6 274.1 344.4 271.6 343.3 270.4 344.6 266.9 344.6 263.6 345.8 261.7 345.5 259.9 343.9 257.6 344.1 256.8 342.5 254 343.9 252.6 343 250.8 343.2 248.7 342.5 246.1 342.4 245.3 343.6 244.4 343.9 246.3 341.3 246.1 340.4 247.2 339.3 247.5 337 247.6 336.5 252.7 334.6 256.5 331.8 258.2 330.6 260.1 327.9 261.8 326.5 259.7 325.4 257.8 325.4 255.8 323 255.8 321.5 252.6 319.2 251.1 318.3 250.1 316.3 250 316.1 249.9 315.5 251.9 314.2 252.8 312.7 256.6 311.4 258.2 309.6 259.9 308.7 260.9 309.1 263.3 307.3 264.5 306.1 262.5 304 263.2 301.1 262.6 300 263.1 297.8 265.6 297.3 267.6 300 271.4 300 272 299.4 273.5 297.8 273.8 296.2 275.2 295.4 278.6 294.8 279.6 293.4 278.2 291.7 278.4 290.8 276.7 288.9 276.1 286.5 271 283.8 269.3 281.8 270.3 280.6 270.4 279.5 271.3 280.1 274.1 278.6 277.6 279 280 277.8 282.7 277.3 283.8 276.7 286 277 286.8 275.3 287.2 275 288.2 275.5 291.9 275.6 293.5 276.4 293.6 276.4 293.9 276.8 295.6 277.9 295.7 279.5 296.5 281.2 298.1 282.6 298.2 283 298.8 286.5 300 285.7 300.7 286.5 302 289.1 302.9 290.1 301.5 296.1 301.2 297.7 299.5 299.8 299.5 300.8 297.9 302.1 296.6 304.1 296.5 305.7 297.5 307.4 298.3 308.6 298.4 310.7 297.7 311.9 297.8 312.9 298.7 314.1 298.4 319.2 299.3 319.6 297.4 320.1 295.4 322.3 293.9 322.9 286.9 324.9 284.3 326.7 284.4 327 284.1 328.7 284.5 331.9 284.6 334.5 283.6 336.9 282.2 338.1 280.3 339.7 277.9 341.9 276.2 345.4 273.9 346.9 273.6 346.5 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(17)"
          />
          <path
            data-city="新北市"
            data-name="土城區"
            :class="{
              'active-district':
                targetDistrict === '土城區' ||
                selectedIndex === 18,
              'initial-animation-29': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['土城區'] / districtData.highest)"
            :fill="districtColor"
            d="M305.7 349.3 303.7 348.4 303.1 349.6 300.3 350.5 295.1 351 293.1 350.5 290.9 351.5 289 350.1 288.5 348.4 287.2 348.1 284.6 347.9 284.9 346.5 284.1 344.1 284 339.1 283.3 338.5 284.5 337.5 285.6 334.7 285.4 331.8 285.1 328.8 285.4 327.2 287.3 325.8 294.3 323.9 296 323.1 298 321 300.9 320.1 305.4 316.8 305.9 315.7 306.5 311 308.4 308.7 309.2 306.6 310.6 305.4 310.8 304.6 311 303.2 311.2 301.3 311.6 301.2 312.5 300.7 313.8 302.4 315.7 301.5 318.6 300.5 321.5 302.6 322.5 300.5 323.4 297.7 323.7 297.6 323.7 299.1 324.3 301.7 327.2 302.8 327.3 302.9 328 304.1 330.4 303.8 332.5 303 333.5 302.3 333.9 300.3 334.7 299.6 335 302.1 338.6 299.6 339.6 300.2 340.4 301.8 342 302.4 343.4 302.8 341.3 306.4 338.9 309.1 339.2 310.1 340.4 313.4 341.6 313.3 343.2 314.7 343.4 316.3 345.3 318.3 345.3 318.3 343.5 318.8 343.8 321.5 343.5 323.6 342.7 324.8 343.7 327.2 337 331.8 337.2 334.6 336.9 335.1 333.6 335.9 332.8 338.7 330.2 340.8 328.7 342.3 327 342.1 325 343.7 324.3 343.6 322.2 345.3 320.1 345.3 316.8 348 315 348.9 312 351.7 307.7 353.4 305.7 349.3 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(18)"
          />
          <path
            data-city="新北市"
            data-name="蘆洲區"
            :class="{
              'active-district':
                targetDistrict === '蘆洲區' ||
                selectedIndex === 19,
              'initial-animation-11': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['蘆洲區'] / districtData.highest)"
            :fill="districtColor"
            d="M337.1 223.7 335.9 221.2 334.6 221 331.1 219.5 330.4 219.5 328.2 218.3 325.7 216.7 326.2 216.3 324.6 215.8 324.5 215.6 323.7 212.9 323.4 209.4 324.1 206.9 324.2 206.6 325.8 205.1 326.4 201.6 326.3 201.6 328.7 200.3 329.3 197.6 329.9 196.5 332.1 197.6 333.2 197.9 339.2 198.1 345.4 198.9 350 201.1 353.3 203.9 351.3 205.9 349.3 207.2 348.6 208.5 347.3 209.7 347.2 212.6 347.2 212.7 346.9 213.8 346.3 214.7 344.6 217.6 343.4 219.1 341.6 220.2 340.4 222.8 340.3 223.2 339 224.5 337.1 223.7 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(19)"
          />
          <path
            data-city="新北市"
            data-name="中和區"
            :class="{
              'active-district':
                targetDistrict === '中和區' ||
                selectedIndex === 20,
              'initial-animation-30': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['中和區'] / districtData.highest)"
            :fill="districtColor"
            d="M344.6 326.9 343.8 324.9 344.4 324 344.8 321.6 344.6 319.5 346.7 318.9 346.2 317.7 344.4 315.8 344.1 314.2 342 312.2 341.1 312.3 340.2 309.8 340 309.3 342.1 307 344.9 302.2 342.3 301.4 341.1 301 340.4 299.5 338.5 298.4 335.8 300.3 335.4 297.2 334.1 298.8 333.3 299.5 332.9 299.5 331.2 297.2 331.5 296.7 331.9 296.8 332.7 294.9 333.4 293 333.2 291.6 334.3 290.8 334.6 289.6 334.7 289.4 336.8 287.6 336.9 287.7 338 287 338.8 286.2 340.9 283.7 343.2 283.3 346.9 283.3 346.4 281.6 347.1 280.4 346.8 279.5 348.3 279.2 351.7 278.6 352.4 282.2 353.8 284.1 356.2 285.2 357.8 286.1 360.2 285.9 361.9 286.4 363.5 287.1 366.1 288.2 368.2 289.6 368.7 289.9 368.5 290.8 367.3 291.6 366.6 294.3 369.1 294 370.5 292.3 372.4 289.8 373.5 290.2 373.9 291.8 373.1 293.9 373.2 294.5 373.8 295.3 372.6 297.7 372.7 297.8 371.1 299.8 373.5 300.1 375.5 298.4 376.3 298 377.2 297.9 379 297.5 379.7 297.3 380.9 297 383.2 296.3 383.8 298 383.8 299.2 385.2 298.2 387.8 298.2 387.6 299.9 388.2 302 387 303.3 385 305.2 381.5 307.8 381.4 307.8 382.1 304.3 379.2 303.9 378.6 304 376 304.3 374.2 305.8 373.6 307.6 372.9 308.6 373.3 310.4 370.7 312.6 370.5 313.5 368.9 315.1 367.3 315.6 365.9 317.8 363.5 320.1 363 321.2 362.5 321.1 359.4 320.4 358.3 321.3 356.1 322.2 354.3 323.6 352.6 324 351.1 325.1 347.9 326.1 346 327.2 344.6 326.9 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(20)"
          />
          <path
            data-city="新北市"
            data-name="永和區"
            :class="{
              'active-district':
                targetDistrict === '永和區' ||
                selectedIndex === 21,
              'initial-animation-31': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['永和區'] / districtData.highest)"
            :fill="districtColor"
            d="M373 299 373.8 297.9 373.7 297.8 375 295.2 374.2 294.1 374.1 294 374.9 291.9 374.4 289.4 372.1 288.7 369.8 291.6 368.6 293 367.9 293.1 368.1 292.2 369.4 291.4 369.8 289.5 368.8 288.8 366.6 287.3 363.9 286.2 362.3 285.4 360.3 284.9 358 285 358 285 361.9 282.2 364.7 279.4 366 277.5 369 273.9 370.6 273.4 373.7 273.6 375.3 274.1 377.5 275.1 380.1 277.9 380.3 278.3 383.2 282.7 384.4 283.6 384.6 283.7 387.1 284.5 388.4 285.6 388.7 287.5 390.2 290.4 389.7 291.3 387.9 292 387.3 295.1 387.6 296.7 387.7 297.2 384.9 297.2 384.6 297.4 383.8 295.1 380.6 296 379.5 296.4 378.8 296.5 377 296.9 375.9 297 375 297.6 373.2 299 373 299 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(21)"
          />
          <path
            data-city="新北市"
            data-name="新店區"
            :class="{
              'active-district':
                targetDistrict === '新店區' ||
                selectedIndex === 22,
              'initial-animation-33': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['新店區'] / districtData.highest)"
            :fill="districtColor"
            d="M343 419.9 344.4 415.6 342.8 414.4 342.4 412.9 340.8 411.6 340.2 410.3 338.1 408.9 340.2 405.1 341.1 401.8 341 400.8 342.8 399.2 343.8 397.4 345 396.8 348.2 390.9 350.3 389.6 350.5 387.5 353.9 386.4 354.5 385.3 355.9 384.3 354.2 382.7 353 379.8 354.2 375 355.3 371.4 353.3 369.2 351.8 366.1 350.5 366.1 349.7 364.9 349.9 362.7 348.8 360.8 344.6 359.9 342.9 360.1 341.6 359.7 339 358.1 336.4 357.7 334.7 358.1 329.3 355.1 327.8 355 327.6 354.3 328.7 352.2 326.7 350.2 326.5 346.8 325.8 344.4 327.3 343.1 329 343.4 330.8 341.5 333.7 339.3 334.4 336.7 337.5 336 338.3 334.8 338 332.3 344.4 327.9 346.2 328.3 348.3 327 351.6 326 353 324.9 354.7 324.6 356.6 323.1 358.8 322.2 359.7 321.5 362.3 322 363.5 322.4 364.3 320.7 366.7 318.4 368 316.4 369.5 316 371.4 314 371.6 313.2 374.4 310.8 374 308.9 374.6 308.1 375.1 306.4 376.4 305.3 378.8 305 379.2 304.9 381 305.2 380.3 308.1 381.4 309.1 385.7 305.9 387.7 304 389.1 302.5 390.4 301.5 391.8 299.1 392.5 300.3 392.6 301.9 392.7 304.6 395.5 305.6 398.8 305.1 399.2 308.5 400.7 309.6 403.7 309 405.6 307.1 405.5 306.2 405.9 306.3 407 307.7 406.4 312.4 407.2 315.2 408.6 315.9 409.1 318.8 410.3 320 411 323.4 411.9 325 412.8 326.8 416.6 327.4 418.3 327.8 422.4 327.5 423.8 328 425.5 326.6 425.7 325.2 428.6 325.3 431.5 327.2 433.3 327.2 434.5 328.6 437.2 328.5 439.5 327.3 441 327.5 442.1 330 444 330.9 445.8 331.2 448.3 330.6 452 328.6 454.2 328.7 454.6 328.3 455.5 331.7 455.2 333.7 453 334.1 453.5 337.7 453.3 339.2 451.9 340.7 452.1 343.1 450.8 342.8 447.5 342.8 447.1 344.2 444.6 345.3 444.8 347.2 446 348.9 446.3 350.5 444.6 351.9 443.4 354.7 443.4 356.5 442.2 360.3 441.4 361.7 442.7 365.2 442.8 369.2 443.7 371.2 443.6 374 444.4 377.2 443.3 376.8 442.2 374.7 438.8 373.4 437.1 373.7 433.9 376.1 428.4 378.8 425.7 378.6 423.9 378.6 421.8 379.7 421.6 380.6 419.5 382.7 417 384.5 419.3 385 420.2 386.4 422.5 387.9 426.4 389.2 427.9 390.8 428.4 391.9 427.7 394.2 427.8 396.3 426.5 399 426.7 402.5 427.5 403.4 426.7 404.7 427.5 406.3 425.9 410.6 424.4 410.8 422.2 408.8 419.5 408.2 417.4 408.6 417.2 408.6 417.4 406.2 416.8 399.8 412.2 396 410.3 395.8 408 394.9 404.2 395.7 402.2 397.8 401.4 398 399.4 396.5 396.5 393.3 394.1 393.3 391.1 395.3 388.9 398.9 386.3 401.2 384 402.5 381.7 402.4 379 402.9 376.6 405.1 372 406.9 368.8 408.3 366.7 410.5 364.4 412.2 362.8 412.7 360.5 415.1 356.7 417 353.6 420.7 351.4 422.6 349 421.9 346.9 423.1 345 423.1 343 419.9 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(22)"
          />
          <path
            data-city="新北市"
            data-name="鶯歌區"
            :class="{
              'active-district':
                targetDistrict === '鶯歌區' ||
                selectedIndex === 23,
              'initial-animation-21': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['鶯歌區'] / districtData.highest)"
            :fill="districtColor"
            d="M211.1 357.9 209 356.6 208.8 355.5 206.7 354.5 204.8 351.5 206.8 350.1 212.2 347 216.9 346.1 218.4 344.8 215.2 341.4 215.2 335.4 215.7 333 215.9 331 216 329.1 215.2 326 216.8 324.6 215.4 323 215.8 322.3 215.3 319.1 215.7 318.3 215 317.7 212 320.1 211.6 320.1 211.5 319.2 214.5 317.6 215.7 315.7 214.8 314 216.3 313.6 219.8 313.9 222.1 312.2 225.1 312.7 227 311.7 227.3 311 228.6 312.4 231.2 313.9 232.4 312.9 235.1 312 236.4 314.7 239 314.9 241.3 314.4 243.4 314.9 243.5 313.7 245 313.2 248.9 315.5 249 316.2 249.1 316.6 250.4 319.1 252 320 254.8 322 254.8 323.3 257.3 326.5 259.4 326.4 260 326.7 259.4 327.2 257.5 329.9 255.9 330.9 252.2 333.7 246.6 335.8 246.5 336.9 246.2 338.9 245 340.1 245.2 341.1 242.7 344.6 240.8 347.5 238.6 348.8 231.6 353 227.9 357.7 226.2 359.1 225.6 359.5 224.8 360.1 224.6 360.2 224.5 360.2 223.1 360.2 220 359.1 217.1 359.2 210.5 360.4 210.3 360.5 211.1 357.9 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(23)"
          />
          <path
            data-city="新北市"
            data-name="三峽區"
            :class="{
              'active-district':
                targetDistrict === '三峽區' ||
                selectedIndex === 24,
              'initial-animation-32': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['三峽區'] / districtData.highest)"
            :fill="districtColor"
            d="M315.3 490.5 312.9 488.9 312.1 487.7 309.2 485.8 308.3 483.4 309.1 480.8 309 477.6 308.2 476.5 308.4 474 307.7 469.9 303.9 468.6 302 467.3 300.2 465.1 299.8 463.8 298.2 462.6 298 460.1 296.5 457.3 292.6 457.1 291.3 457.4 290.4 456.2 290.3 454.5 288.5 451.6 290.1 448.1 285.3 445 283.9 443.1 278.3 440.1 276.8 441.8 274.7 441.9 274.1 440.1 270.6 439.8 268.5 440.8 265.7 441.3 262.9 443 262.4 445.7 261.6 446.5 259.6 446.9 257 448.8 253.4 449.5 253.3 448.5 250.8 447.3 248.3 446.7 245.6 445.3 242.1 445.3 240.4 444.2 237.8 439.9 234.9 439.4 230.6 438 226.8 439.2 224.4 440.4 221.9 440 222.1 437.8 222.6 436.8 226.6 436.5 230.5 435.1 232.1 436.7 233.3 435.7 236.4 436.2 235.7 434.8 236.6 434.5 237.8 432 240.6 432.2 240.6 430.1 238.5 429.5 236.9 426.3 233.1 425 231.6 423.1 230.4 419.3 229.8 418.7 230.2 418 233.1 417.5 234.2 416.1 236.8 414.5 237.7 412.8 236.8 411 236.9 409.4 235.4 409 234.1 407.3 231.3 407.2 230.1 405.5 229.3 400.7 226.5 399.1 226.3 398.2 227.3 393.9 225.4 394.3 223.4 393.3 220.7 394.8 219.4 394.8 218.6 393.6 219.7 390.9 219.7 389.8 219.9 388.2 218.1 386.7 216.5 389.3 214.4 390.8 210.1 388.5 208.7 387.3 209.9 385.5 209.8 384.6 211.2 383.8 213.6 380.8 213.5 378.6 211.2 377.8 211.1 377.2 210.3 375.5 208.4 374.5 207.8 373.2 206.4 372.1 212 366 214.2 364.9 216.2 364.6 220 364.8 221.3 364.4 224.9 361.2 225.3 361 226.1 360.4 226.2 360.3 226.8 359.9 228.6 358.4 232.3 353.8 239.1 349.7 241.5 348.2 243.4 345.3 246 344.4 246.7 343.4 248.5 343.5 250.7 344.2 252.4 344.1 254 345 256.4 343.8 257 345.2 259.6 345 261.3 346.4 263.7 346.8 267.1 345.6 270.8 345.6 271.8 344.5 272.5 344.8 271.9 345.4 272.7 347 273.6 348.2 277 346.1 278.7 342.5 280.9 340.5 282.5 339.1 283 339.5 283.1 344.3 283.9 346.5 283.3 348.8 287 349.1 287.7 349.3 288.2 350.7 290.7 352.6 293.2 351.6 295 352.1 300.5 351.5 303.7 350.4 304.1 349.7 304.9 350 307.2 354.7 312.5 352.5 315.5 349.7 317.4 348.8 320.4 346.3 322.5 346.3 324.6 344.6 324.8 344.6 325.5 346.9 325.8 350.7 327.5 352.4 326.6 354.1 327 355.9 328.9 356.1 334.5 359.2 336.5 358.7 338.6 359 341.2 360.7 342.8 361.1 344.6 360.9 348.1 361.7 348.8 363 348.7 365.2 350 367.2 351.2 367.1 352.5 369.8 354.2 371.6 353.2 374.7 351.9 379.9 353.4 383.3 354.3 384.2 353.7 384.6 353.2 385.6 349.6 386.8 349.4 389 347.4 390.2 344.3 396.1 343.1 396.7 342 398.6 339.9 400.4 340.1 401.7 339.2 404.7 336.8 409.2 339.4 411 340 412.2 341.5 413.5 342 415 343.2 416 341.9 420 344.5 424.1 347.1 424.1 349.1 423 351.3 423.6 354.9 428.6 354.8 431.3 356.1 433.3 357.8 434 358.4 435.4 358 437.6 358.2 440 357.7 442.5 356.5 444.2 356.3 447.1 353.1 448.8 350 449 347.3 451.8 347 455 345 457.7 344.1 459.8 345.8 460.8 347.3 463.7 346.9 464.9 345.7 466.3 343.1 466.1 340.5 467.9 338.2 468.9 337.5 471.6 334.8 474.5 332.9 475.3 329 476 326.4 479.9 322.8 482.5 323.6 487.9 322 489 319.7 488.8 318.8 489.8 316.4 490.6 315.3 490.5 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(24)"
          />
          <path
            data-city="新北市"
            data-name="瑞芳區"
            :class="{
              'active-district':
                targetDistrict === '瑞芳區' ||
                selectedIndex === 25,
              'initial-animation-38': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['瑞芳區'] / districtData.highest)"
            :fill="districtColor"
            d="M632.5,253.2l-1.6-3.1.5-1.5-1.5-4-.2-1.5.7-4.7-2.1-1.4-2.1-.4-2.5,1.4-1.2-1.8-.4-2.7,1.1-2.7-1.9-1.5-2.9-5.2-2.1-2.7-1.9-1.2-1.2-.3-4.7,1.3-4.1,3.2h-1.2c0-.1-2,1.3-2,1.3h-2.3c0,0-1.8.8-1.8.8l-1.2-2.1-2-2.2-1.3-2.7-2.3-1.1-5.5-.4-1.3-2.8-.2-5.2.6-1.8-1-3.6,1.1-6.5-2.5-1.2.9-1.3-.5-2.9-1.4-2-1.7-.7-1.7,1.8-1.2-.7-.5-1,1.3-1,4.7.6,1-1.3,2.1.2,1.5-1.6h1.8c0-.1,1.5.6,1.5.6l2.4-1.8,2-3.9,1.3-1.3,1.7,1.2,6.1,1.8h1.3c0,0,1.5-.9,1.5-.9l1.8,3.2,1.6,1.8,2.9-.5,1,.3.8-.3,2.5-1.3v-3.3c-.1,0,1-2.1,1-2.1l-3.8-3.5v-2c0,0,1.6.6,1.6.6l4.8,3.4,2.8-4.3-1-1.5,1.2-1.4v-2.4c-.1,0-1.7-3.1-1.7-3.1l.2-.6,1,.4,1.8,2.2,2.5.4,1.8-.8,3.4.3,1.8-.4.6-.9h1.1s-.6.7-.6.7l-.9,3.5-.8.8.9,1.7-.5.8.8,3.4,1.5,1.7,2.1-.4,2.2.5v-1.3c.1,0,.9,0,.9,0l.4.6.9-.3v-.8c0,0,1.6-2,1.6-2l-1.2-2.1h0c0,0,2.2.8,2.2.8l.2-.7,1.5,1,.6-2h6.6c0,0,0,.8,0,.8l3.4.5h2.2c0-.1,6.6,2.4,6.6,2.4h2.1s1.2.3,1.2.3l1.2-1.4.2,1.5,1.3,1.2,2.2.6,2.3-.3v-1.5c0,0,1.2-1,1.2-1l1.2,1.3,1.5-1.2.8-.4,1.9,2.2,4-.7h2s3.5,1.8,3.5,1.8l.7,1.2,2.5,1,1.5-1,1.1.4,4,.5,1.4-.7,2.8-2.4v.2s1.7,1.1,1.7,1.1l3.7-.9.2-1.1,3.4-.8,1.7-2.6,3.2-.6,2.7-1.7.6,1-1.6,2.7.2,1.5-1.8,1.4-1.2,1.1-4.4,1.8-4.7,1.6-.4-.7-5.6,1.7-1.7,2.1-2.2.2-.9,2.2-1.3,1.3-.3,1.6,2.2,4.8-1.2,1.8-2.6.5-4.4.2-5,2.5-2.6,2.5-2.3.4-1.3-.4-1.6,1.2-4-.3-.4-.9-4.6-1.3h-4.4c0,0-2.2.8-2.2.8l-1.2,1.7-1.2,4.4-3.1-.2-2.2,2.7-2,4.1-1.8,1.5-.4,2.5-1.2,1.7-1.9,1.9-1.1.3-2.5,2v2.6c-.1,0-1.1,2-1.1,2l-1.3,2,.7,3v2.9s.5.8.5.8l-.7,1,2.9,6.2v2.1c0,0,.8.8.8.8l-.5,2.2-2.1-.2-2.9-.9-2.3.6-.8-.8h-2.4s-1.1,2.3-1.1,2.3l-1.7,1.3h-.5ZM636.4,166.6l1.6-1,1.2.2-1.8,1.2-1.1-.4Z Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(25)"
          />
          <path
            data-city="新北市"
            data-name="五股區"
            :class="{
              'active-district':
                targetDistrict === '五股區' ||
                selectedIndex === 26,
              'initial-animation-10': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['五股區'] / districtData.highest)"
            :fill="districtColor"
            d="M317.5 234 315.6 232.2 315.4 227.4 312.3 227.8 311.9 229.3 308.6 229.3 308.6 231.7 308.1 232 306.1 230 303.8 230.6 303.6 228.8 302.8 227.9 301.3 227.7 296.3 227.5 292.7 227.8 289.8 226.4 289.1 225.1 285.3 221.7 283.6 221.4 283.2 220.2 281.1 220.8 280.4 220 279.5 220.6 279.8 219.7 281.3 217.2 279.3 217.1 279.4 216.3 278.3 213.9 278.5 213.8 279.6 215 281.8 216.2 283.5 218.3 284.4 217.1 284.4 216.4 286.4 217.7 287.2 219.1 289.2 219.3 288.8 217.4 289.3 215.7 288.5 215.2 287.4 216.5 287 215.5 285.6 215.2 284.4 213.7 284.5 212.1 283.6 211.3 283.5 210.2 285.7 209 285.1 206 284.5 206 284.8 205.5 284.7 205.3 286.5 206.9 287.6 201.4 285.5 203 284.7 201.7 284 198.2 283.1 199.5 282.6 198.8 283 198 281.8 195.8 280 197.2 280 195.4 279.1 192.1 278.1 191.6 278 189.2 277.2 186.7 277.5 182.4 278.5 182 279.5 180 278.9 179.7 280.3 178.3 280.9 178.4 284.8 179.9 286.7 178.4 288.1 177.9 289.2 177.9 290.3 175.4 290 171.6 290.1 171.3 292.1 171.2 294.5 171.7 296.8 169.4 297.2 169.3 297.9 171.5 301.3 172.5 302.9 172.2 304.4 173.3 306.5 173.8 308.8 176.1 309.4 175.9 311.4 177.8 314.9 177.8 316.5 178.6 317.7 180.6 320.2 180.6 323.4 182.5 322.8 183.8 324.5 186 325.7 186.1 326 187 324.4 189.6 324.5 191.6 328.2 195.6 329 196.1 328.4 197.2 327.8 199.6 325.6 200.8 324.7 201 325.3 201.9 324.9 204.6 323.3 206.1 323.1 206.6 322.4 209.3 322.7 213.1 323.5 215.8 323.7 216.7 324.1 216.8 324.1 216.8 327.7 219.2 330.1 220.5 330.9 220.5 334.3 221.9 335.2 222.1 336 223.8 335.3 223.9 335.2 228.4 334 229 332.3 230.6 331.6 229.2 329.8 228.1 327.6 228.4 326.7 227.8 322.5 232.8 321 232.4 319.3 235 318.9 235.3 317.5 234 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(26)"
          />
          <path
            data-city="新北市"
            data-name="泰山區"
            :class="{
              'active-district':
                targetDistrict === '泰山區' ||
                selectedIndex === 27,
              'initial-animation-13': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['泰山區'] / districtData.highest)"
            :fill="districtColor"
            d="M292,264.4l-1-.2,1.2-2.6-1.4-1.3h-1.9c0-.1-1.4-.5-1.4-.5l.5-2.7-1.5-1.2.8-.9-2.4-.5.6-1.8-1.6-1.6-5.2-1.2-2.5.5-1-1.1,1.5-1.3-1.3-.3v-.9c-.1,0,.7.9.7.9l1.4-3.3h-3.3c0-.1-.8-.9-.8-.9l-3.2-1.6h-.2s.2-.2.2-.2l-.6-.8-2.8,1.5-2.1.6,1.2-2.2-1.5-1.4v-.2s2.6,1.2,2.6,1.2l-.3-1.7,1.5-1.3-1.5-.4,3.5-2.1h-3.6s0-1.3,0-1.3l-2.4-.3-2.5.3-.6-1.1-1.6-.8h0s1.8,0,1.8,0l1.1-2.1-.9-.9.6-1.5-3.4-.9h-.2c0-.1,1.9,0,1.9,0l2,.3,1.5,2.3.4-3.6h.2c0,0,.5,2.3.5,2.3l2.4,3,.5-2.2.7.2,2.5-2.6,1.4-1,.4.3v1.2c0,0-1.5,2.1-1.5,2.1l.7.8-1.7,1.1,3.1,1.4,2,.2v2.3c.1,0,2.7-.5,2.7-.5l.8,1.1,2.3-1.1v-1.7c0,0-2.4-1.9-2.4-1.9v-.7c0,0,2.9-.7,2.9-.7l-.3-2.1-2.6-.3-2.5-2.8.7,3.3-.9.3-.4.5.2-4.9-.3-.5,1.5.7h3.1s2.8-.7,2.8-.7l1.6.3,3.4,3.1.8,1.5,3.5,1.6,3.8-.4,4.9.2,1.1.2.3.4.3,2.2.7.3,2.2-.6,2.3,2.1,1.5-1v-1.9s3.1,0,3.1,0l.4-1.6,1.3-.2.2,4.2,2,1.8v1.5s-3.3,1.9-3.3,1.9l-3.9,1.4-.7.9.8,2.7-.2,1.4h1c0,0,.8,2.8.8,2.8v1c0,0-1.6.8-1.6.8l1.9,2.3v2.4s-.5.1-.5.1l-3.2-2-.6,4.1h-.2c0-.1-2.8-2-2.8-2l-.6.6-1.3,1.4-1.9,3.1-2.4,2.9-1.8,1.5,1.6,1.5-1.3.4-1.6-1.4-.9,1.6-1.8-1Z Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(27)"
          />
          <path
            data-city="新北市"
            data-name="林口區"
            :class="{
              'active-district':
                targetDistrict === '林口區' ||
                selectedIndex === 28,
              'initial-animation-5': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['林口區'] / districtData.highest)"
            :fill="districtColor"
            d="M278.8,232.9l-2,.4v-2c-.1,0-2.8-.3-2.8-.3l-1.2-.6,1.2-.7-1-1.1,1.1-1.7v-2c.1,0-1.3-1-1.3-1l-2.1,1.4-2.2,2.3-1.2-.4-.3,1.2-1-1.2-.6-3.3-1.9.6-.2,1.5-.2-.4-2.5-.4-5.7-.3,3.5,2.2,2.5.7-.4,1.1.9.8-.4.9h-2.5c0,0,.2.6.2.6l-2.4-.7-6.3.7v-.2s-4.5.6-4.5.6l-7.1-.2v-1.6c0,0-1.3-1.7-1.3-1.7l-1.4.7-2.7-1.8h-.4c0,0,1-.4,1-.4l3-4.7-2.5,1.4v-3.7c.1,0-2.4,3.8-2.4,3.8l-4.2.5-1.4-.6v-1.5s.2,0,.2,0l1.8,1.4,4.1-.9-2.8-1v-1.1c0,0,4.3-1.6,4.3-1.6l-3.6-.7,4.5-.7-1.3-1.9-2.4-1.2-4.3-.5-2.6.4-1.8-1.4-3.2-1.5-2-1.4-1.8-2.6-3.1-1.7h-3s-2.5-.3-2.5-.3l-5-2.4-1.8-1-6.3-.2-1-1.3v-3c-.1,0-3-3.1-3-3.1l-2.6,1.5-2.8.3-1.1-3.8-3.3-.3-3-2.5.8-1.7-.2-4.5h2.2s4.5-1,4.5-1l2.4-1.4.9-1.7,3-1.8h3.9c0-.1,1.1-2.4,1.1-2.4l3.3.2.5,1.7v.4s.1.4.1.4l4.8.2,6.8-.4,8.1-1.2,2.2-.8,3.2-.9.5-.6,4.6-1.3,4.4-1.4,2.2-1,3.4-2.6,5.1-1.3,2.7-1.6.6,2.4,1.5,1.6,1.1,2.7,2.1,3.3,1.3,1v2c.1,0,2.4,1.1,2.4,1.1v1.5c0,0,5.7,5,5.7,5h1.8c0-.1-.3,1.9-.3,1.9l.7.7-1.2,1.6,2,.9,1,2.2.9.3,2.1,5.7,2.4.3-.2-1.2,1.1,1.8-.6,1.4,1,1.5.7,2.8-.7,2.6.3,2.3-.6.6v-1s-2.7-1.3-2.7-1.3v1.5c.1,0-1.9-.7-1.9-.7l-.2,2.2,2.4.7.6,1.8-1,3.5,1.8,1,1.2-2.9.2.5,3.1,1.7v-2.1c0,0-1.1-.9-1.1-.9v-.5s1,.4,1,.4l1-3.6,2.1.2.2-2.6-1.6-.2.2-1.4h.8c0,0,2-4,2-4l-1.9-2.3.2-1.7-.3-.6h.2c0,.1-.2-4.5-.2-4.5l-.4-.5h.7c0,0,0-1,0-1h0s.7,2.7.7,2.7l.2,3.6,2.3-1.9.4.7-.5.9,1.8,2.1.3-.5.3,1.4,1.3,2.2-1.8-1.6-.8.6,1.2,2.2-1.1,1.8,1.7-.2.3,1.4-2,1.1v2.1c.1,0,.9.8.9.8v1.6c-.1,0,.7,1,.7,1l-.8-.5v2s-.9-1.2-.9-1.2l-2.2-1.2-1.5-1.6-1.9.8,1.5,3.1-.2,1.5h1.4c0,0-.8,1.3-.8,1.3l-.7,2.7h-.7s-4.1-2-4.1-2l1.6,3.1-.3,7.7,2.1-2.6,1.5-.5v-.4c0,0,0,.2,0,.2l2.2.3v.5c0,0-2.6.7-2.6.7v2c-.1,0,2.3,1.9,2.3,1.9v.6s-1,.5-1,.5l-.7-.9ZM280.2,221.3l.5.6h-.5c0,.1-1.1.1-1.1.1l1.1-.7ZM282.5,221.4h0c0,0-1,.3-1,.3l1-.3ZM287.8,218.2l-.2-.4.2-.2v.7c.1,0,0,0,0,0ZM286.2,216.3h0s0,0,0,0h-.1ZM285.2,204.4l.9-.7-.3,1.3-.7-.6Z Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(28)"
          />
          <path
            data-city="新北市"
            data-name="深坑區"
            :class="{
              'active-district':
                targetDistrict === '深坑區' ||
                selectedIndex === 29,
              'initial-animation-35': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['深坑區'] / districtData.highest)"
            :fill="districtColor"
            d="M464.3 321.2 461.2 319.7 459.3 317.8 454.4 316.5 451.6 317.1 450.7 316.2 447.4 314.7 446.9 313.6 447.9 312.6 447.7 309.4 447.2 307.1 447.6 305.6 448.9 305.2 448.7 302.1 446.7 301 447 299.8 445.9 299.1 446 297.9 448 294.9 448 292.4 446.8 290.4 444.9 288.7 444.1 288.8 444.1 288.3 443.7 286.4 444.3 282.9 445.2 281.4 445.3 280.1 446.8 280.2 450 279 451.1 275.7 453.7 275.4 455.2 276 456.5 275.2 459.5 275.8 460.4 275.4 461.6 276.5 464.3 276.6 466.3 277.8 469.9 276.1 470 275.3 471.2 275.4 472.9 273.3 474.3 269.9 477.8 271.8 479.2 271.2 480.9 271.6 480 273.8 482.2 278.9 482 280.9 481.2 281.7 481.7 283.5 481.3 285 482.3 285.9 480.1 288.3 481.1 291.3 483.4 292.1 485.2 292 485.5 294.5 483.9 296.8 483.9 297.4 479 297.5 477.4 300.5 478.7 301.7 478.1 305.2 478.7 309.2 479.6 311.1 478 312.9 475.6 314 472.5 316.8 469.2 319.2 464.4 321.6 464.3 321.2 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(29)"
          />
          <path
            data-city="新北市"
            data-name="石碇區"
            :class="{
              'active-district':
                targetDistrict === '石碇區' ||
                selectedIndex === 30,
              'initial-animation-36': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['石碇區'] / districtData.highest)"
            :fill="districtColor"
            d="M476.3 425.8 474.5 425.4 472.4 423.4 469.1 423.4 464.7 421.6 463.6 423.2 462.2 422.9 460.3 424 455 421.9 448.1 421.7 445.3 420.9 443.3 418.7 440.9 419 440 418.3 438.8 416.1 437.1 415.3 434.5 412.9 429.8 411.3 428.4 411.4 426.9 410.8 428.6 406.3 427.8 404.7 428.7 403.4 427.6 402.1 427.5 399.2 428.8 396.5 428.7 394.3 429.4 391.9 428.8 390.2 426.9 388.4 423 387 421 385.7 419.9 384.1 419.4 384 420.1 383.5 422.5 381.1 422.7 380.3 424.1 379.6 425.6 379.6 428.6 379.8 434.4 377 437.5 374.7 438.7 374.4 441.5 375.5 442.6 377.6 445.8 378.7 444.6 373.9 444.7 371.1 443.8 368.9 443.7 365 442.5 361.8 443.2 360.7 444.5 356.7 444.4 354.9 445.4 352.5 447.4 350.9 446.9 348.5 445.8 346.9 445.7 345.9 447.9 344.9 448.3 343.8 450.7 343.8 453.2 344.5 453 341 454.3 339.6 454.5 337.7 454.1 334.9 456.1 334.5 456.5 331.6 455.4 327.6 458.5 325.6 460.1 325.5 461.5 324.6 462.5 325.4 464.2 322.7 469.7 320 473.2 317.5 476.2 314.8 478.6 313.8 480.8 311.3 479.7 308.9 479.1 305.2 479.8 301.4 478.6 300.3 479.6 298.5 484.9 298.4 484.9 297.2 486.5 294.7 486.1 290.9 483.6 291.1 481.9 290.5 481.2 288.6 483.7 285.9 482.5 284.7 482.8 283.5 482.3 282 483 281.3 483.2 278.7 481.1 273.8 481.9 271.6 483.7 270.9 484.5 271.2 487 273.7 489.9 271.3 492.9 270.9 495.8 271.8 497.9 271.8 501.7 272 503.1 269.4 502.8 267 503.7 265.4 503.7 262.2 507.6 263.1 508.7 261.5 510.6 261 513.1 261 513.8 260.2 514.4 259.4 517.7 257.8 517.6 257.2 519.1 256.1 520.9 255.9 522.8 254.6 525.7 254.4 528.2 255.3 528.7 257 528 258.6 529.4 260.7 532 261.8 533.5 261.9 534.6 263.4 534.6 265.7 535.5 268.1 533.9 269.1 532.9 271 535.7 276.6 537.7 277.6 537 279.2 539.9 282.5 542.1 284.5 543.4 287.5 543.8 288.3 547.7 286.9 549.3 286.9 550.4 285.8 550.9 286.4 551.2 288.3 550.5 291.8 549.3 292.2 549.6 294.2 551.7 296.5 553.4 301 554.7 303.6 552.8 306.1 552.8 308.6 552.3 309.3 550.9 309.5 549.7 311.5 548 311.7 546.5 312.8 547.4 315.2 547.4 317 547.3 317.4 547.1 319.9 545.8 320.3 542.6 318.8 541.8 319.4 539.3 318.5 536 320.7 533.9 324.2 532.5 324.4 531 326.2 527 326.4 525 327.6 522.6 327.2 520.5 329.6 519.3 332.3 517.6 333.1 517 334.4 514.8 335.9 509.8 336.6 505.9 337.8 504.9 337.7 503.7 337.7 502.5 340.6 502.9 342.3 502.7 344.8 503.2 346 503.8 350.5 505.9 351.3 506.4 359.4 507.6 361 510.2 362.8 511.7 366.2 512.2 366.5 510.9 366.8 509.1 368.4 505.8 370.5 503 371.1 500.3 373.4 501.3 375.7 501.4 377.6 502.7 379.7 501.9 380.7 499.2 382.4 499.4 384.2 498 385.9 495.7 387.2 492.1 388.5 488.1 392 489.2 394.6 491.5 397 490.4 399.2 490.5 401.7 488.9 406.3 490.1 408 491.6 408.4 492.7 409.5 491.9 413.7 491.9 415.1 490.1 416 489.6 416.9 487.9 417.4 486.7 421.4 484.8 424.1 484.1 424.2 482.5 422.8 479.5 424 477.1 426.9 476.3 425.8 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(30)"
          />
          <path
            data-city="新北市"
            data-name="坪林區"
            :class="{
              'active-district':
                targetDistrict === '坪林區' ||
                selectedIndex === 31,
              'initial-animation-40': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['坪林區'] / districtData.highest)"
            :fill="districtColor"
            d="M536.8 442.1 535.2 441.5 534.4 441 527.7 440.2 526 439 524.7 435.9 523 435.8 522.2 434.3 519.8 434.7 517.1 434 513.7 435 513.3 434.4 510 435.1 509.5 434.8 506.7 435.9 503.8 434.2 502.3 434.5 497.9 433.4 495.8 434.4 494.4 433.1 492.6 429.4 490.5 427.8 486.3 425.3 485.7 424.6 487.7 421.8 488.7 418.2 490.3 417.8 490.8 416.8 492.9 415.7 492.9 413.8 493.8 409.1 492.1 407.5 490.7 407.1 490 406.2 491.5 401.9 491.4 399.4 492.7 396.8 490 394 489.3 392.2 492.6 389.4 496.1 388.1 498.7 386.7 500.5 384.5 500.3 382.9 502.5 381.5 504 379.8 502.4 377.3 502.3 375.5 501.5 373.6 503.5 372 506.1 371.4 509.8 369.2 511.4 367.7 514.8 366.9 512.5 365.5 511 362.1 508.3 360.3 507.4 359 506.9 350.6 504.7 349.8 504.2 345.8 503.7 344.6 503.9 342.2 503.6 340.7 504.4 338.7 504.8 338.7 506 338.9 510 337.5 515.2 336.8 517.8 335.1 518.4 333.9 520 333.1 521.4 330.2 523 328.3 525.2 328.6 527.3 327.4 531.4 327.2 533 325.3 534.5 325.1 536.7 321.4 539.5 319.6 542 320.5 542.7 320 545.7 321.4 548 320.7 548.3 317.7 550 318.4 552.5 317.5 555.5 317.7 561.3 316.1 563.7 316.9 565.7 313.2 566.2 313.6 568.3 313.1 569.7 317.4 571.6 317.2 573.3 318.2 574.8 317.7 577 315.6 577.9 316 580.6 314.9 582.5 315.7 584.4 314 585.8 313.7 586.9 312.2 590 313.1 593.8 313 597.3 307.7 600 309.1 601.9 310.8 605.3 310.8 606.5 309.8 610.8 309.5 611.1 311.4 612.2 314.7 611.9 318.5 610.3 321.2 610.6 325 609.3 326.8 609.5 328.8 608.9 330.5 609.8 333.4 609.7 335 611.4 336.6 610.8 338.5 609.8 338.9 606.8 345.4 608.2 349.3 605.5 352.5 605.3 355.1 604.5 356 604.5 358.6 601.9 360.6 601.1 364.5 600.8 365.8 598.4 369.2 601.8 371.1 603.7 373.2 604.3 374.5 604.5 377.9 605.7 382.1 607.1 382.2 609.1 384.5 609.9 384.8 611.3 387.2 610.4 387.2 610.6 390.1 611.1 391.1 609.3 392.4 608.9 393.3 605 394.5 605.1 395.8 603 396.2 601.6 397.3 602.1 400.7 601.8 404.2 602.1 407.4 603.9 409 604.5 411.4 603.2 411.4 598 415.6 596.1 418.8 596.3 420 593.4 420.2 591.5 419.2 589.4 420.2 589.7 421.6 588.5 422.5 587.2 424.6 586.1 423.4 584.4 425 584.7 426.9 584.2 427.7 578.5 428.2 577.3 429.7 575.6 430 572.8 429.5 572.4 430.9 571.3 431.5 568.4 431.9 565.3 429.2 561 428.6 558.2 429.2 555.2 431.3 553.5 433.5 550.8 434.3 548.1 438.4 545.4 439.5 544.2 441.9 541.9 442.2 539.7 443.1 538.8 444.4 536.8 442.1 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(31)"
          />
          <path
            data-city="新北市"
            data-name="三芝區"
            :class="{
              'active-district':
                targetDistrict === '三芝區' ||
                selectedIndex === 32,
              'initial-animation-2': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['三芝區'] / districtData.highest)"
            :fill="districtColor"
            d="M378.4 120.8 374.8 119.9 372.1 118.3 370.2 115.9 368.5 115.9 368.6 115.1 367.1 113.5 364.6 112.9 364.1 111.2 362.1 110.9 358 112.5 357.4 111 356.1 110.7 356 109.1 354 107.7 349.7 106.9 349.7 106.1 352.5 104.6 352.3 101.8 349.7 99.6 350.9 98.8 349.3 96.8 350.5 94.5 352 94.9 354.4 94.4 354.5 93.4 355.6 94 358.2 91.5 359.9 92.4 360.7 89.7 359 86.6 358.9 84.8 361 86.4 360.6 84.6 362 84.9 363.7 82.4 361.4 80.3 359.2 79.9 358.9 79.1 360.2 76.8 358.7 75.3 354.3 74 353 74.2 346.3 71.2 343.6 70.3 340.4 68.6 336.9 67.5 335.2 66.5 333.8 67.2 330.6 67.3 328.8 66.3 326.5 66.2 325.6 65.5 325.2 63.6 322.9 62.6 318.9 62.3 316.5 63.6 316.1 63.8 317.2 60.9 319.9 57 321.3 55.3 324.1 55 329.5 56.1 333.8 54.8 337.6 52.2 339 50.4 340.5 51.3 341.7 49.2 341.4 48.2 344.3 45.4 343.2 43.9 343 42.5 344 40.9 346 40 347.1 38.5 349.8 37.4 351.9 36 353.7 35.4 355 33.5 355.7 33.3 357.9 31.6 362.3 29.7 364.1 30 364.4 28.9 365.7 28.3 367.5 30.5 367.1 27.4 367.6 27.2 368 31.1 371.2 32.8 373.9 33.1 374.9 35.8 378.1 40 379.4 40.3 380.4 42.5 381.4 43.2 382.1 45.6 385.2 47 386.7 48.5 389.2 47.6 388.5 44.6 390.1 42.6 390.6 42.9 394.6 42.7 396.2 43.3 397.6 41 398.6 41.1 400.4 41.9 402.1 43.7 402.6 43.1 403.6 44.9 404.1 46.5 403.5 48.4 401.9 50.6 402 52.7 400.6 54 401.8 57.7 401.6 58.9 400.4 60.7 399.1 61.8 400.1 63.6 398.9 65.8 400.4 66.6 403.1 64.6 403.6 63.3 404.7 62.4 405.6 63.2 404.1 64.4 405.9 66.2 408 68.8 409.2 72.8 408.6 75.3 408.9 77.1 408.5 78.9 410.3 79.9 412.7 83.2 414.6 84.2 415 86.3 417.2 90.4 416.3 91.1 414.6 90.9 411.8 94.7 410.1 96 408 96.2 406.6 100.3 405.1 101 404.9 102.9 406 104 405.5 107 405 107.3 403.2 105.8 399.5 108.3 397.8 110.7 397.5 114.6 396 116.3 392.8 116.4 391.9 117.1 389.8 119.5 386.4 120.3 383.5 120.2 380.2 123.7 378.4 120.8 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(32)"
          />
          <path
            data-city="新北市"
            data-name="石門區"
            :class="{
              'active-district':
                targetDistrict === '石門區' ||
                selectedIndex === 33,
              'initial-animation-1': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['石門區'] / districtData.highest)"
            :fill="districtColor"
            d="M416 85.9 415.5 83.6 413.4 82.4 411 79.1 409.6 78.4 410 77.2 409.6 75.3 410.3 72.8 408.9 68.4 406.7 65.5 405.7 64.5 407.2 63.3 404.7 61.1 402.8 62.7 402.3 64 400.3 65.4 400.3 65.4 401.3 63.6 400.3 62 401.1 61.3 402.5 59.3 402.8 57.6 401.7 54.3 403 53.1 402.9 50.9 404.4 48.9 405.1 46.5 404.5 44.5 402.8 41.4 402.1 42.2 400.9 41.1 398.8 40.1 397.1 39.9 395.8 42.1 394.8 41.7 390.9 41.9 389.9 41.4 387.4 44.3 388.1 47 387 47.4 385.7 46.2 382.9 44.9 382.2 42.6 381.2 41.9 380 39.4 378.6 39.1 375.8 35.3 374.6 32.2 371.5 31.8 369 30.5 368.6 27 369.4 26.9 371.3 24.9 369.8 24.2 369.5 20.9 369.9 19.4 370.6 19.1 371.9 20.2 371.2 21.5 372 24.1 373.6 25 377.1 25.6 379.4 25.3 379.8 23.4 381.3 23.1 384.6 24.2 387.1 22.9 388.6 21.2 389.6 21.8 392 17.9 390.7 15.6 390 15.1 390.8 13.5 393.3 10.7 395.5 12.5 395.5 15.2 399.9 17.8 401.9 18.3 405.7 18.6 407.2 17.4 412.6 18.4 416 17 417.1 17.5 417.5 18.5 418.5 18.1 417.9 16.2 419 15.4 419.3 13.6 420.8 12.5 428.1 12.4 429.7 13.1 432.7 15.5 436.5 18.5 440.4 18.9 445.8 21.2 446.5 22 449.9 24.5 451.4 26.3 452.1 28.2 453.4 28.9 457.4 30.1 458.9 30.2 461.6 31.8 463.5 33.8 461.8 35.2 460.3 41.8 461.1 42.8 461.1 46.1 462.4 49.7 462 51.1 460.2 53.7 458.7 53.2 456.3 53.2 449.9 54.5 449.4 55.1 446.6 59 446.5 60.5 444.7 63.5 444.1 63.7 441.7 64.2 436.7 69.5 435.7 70.9 432.9 72.9 430.7 78 431 80.9 430.1 82.6 427.8 84.6 422.3 85 419 87.3 417.9 89.5 416 85.9 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(33)"
          />
          <path
            data-city="新北市"
            data-name="八里區"
            :class="{
              'active-district':
                targetDistrict === '八里區' ||
                selectedIndex === 34,
              'initial-animation-6': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['八里區'] / districtData.highest)"
            :fill="districtColor"
            d="M270.3,217.2l.9-3.1-.9-2.6h.2c0,0,0-1.2,0-1.2l.6.3v2.7c0,0,2.6-2.6,2.6-2.6l-.4-2.6.8-2.6-.8-3.2-.8-1.2.6-1.4-2.8-4.6-.9.3.5,2.6h-.4s-2.1-5.6-2.1-5.6l-.9-.3-.9-2.1-1.2-.6,1-1.3-1-1,.4-2.8-2.6.2-5.1-4.4v-1.7c0,0-2.3-1.2-2.3-1.2v-1.8c-.1,0-1.6-1.2-1.6-1.2l-2-3.1-1.2-2.8-1.4-1.6-.6-2.4,4.1-1.5,2.5-2.2-.9-.2h.2s7-2.4,7-2.4l4.5-1.8,2.5-1.6-1.5-4.8,2.9-14,8.4,8.3,3.4-1.7,2.4-3.7.9-.3,2.9-3.2.6-2.4,3.1-4.3,6.4,4.1.4.2,5.1,2.4.4.2,1.7.9,2.7,2,3.8,2.9,3.4,3.4,3,3.8,1.5,3.3,1.1,3.7.8,4.3.5,2.3.2.7.8,4.2.8,4.6.7,3.5,1.5,1.8v1.3c.1,0,2.9,6.1,2.9,6.1l-1.9,2.2-.3-1h-1.4c0-.1-1.1-1.5-1.1-1.5l.6-1.6-4.2-2.4h-2.2c0,0-1.1-1.8-1.1-1.8l-2-1.1h-3.3s-2.2-2-2.2-2l-.6.2-2-2-2.3-.5-1.6-1.2-1.8.3-2.6-.8-.9-2.6-1.6.4-2.1,2.2-1.9-.4-2.6.2-.6.9.4,4-.8,1.6h-.6s-1.7.6-1.7.6l-1.6,1.3-3.4-1.3-1.1-.2-2.9,2.7,1,.5-.4.8-1.3.5-.3,5.1.8,2.5v2.6c.1,0,.2.8.2.8l-2.3-.3,2.1,2.2v2.5c.1,0-1.7-.9-1.7-.9l1.9,3.3-.3,1.8,1.8,2.2-1.5,2.8h-1.1c0,0-.5,3.3-.5,3.3l1.7.2v.6c0,0-2-.2-2-.2l-.9,3.4-1.2-.5-.2,2.3,1.1.9-1.2-.7-.9-2.5-1.7,4.2h-.1ZM268.1,210.9h0c0,0,1.6.4,1.6.4l-1.6-.4Z Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(34)"
          />
          <path
            data-city="新北市"
            data-name="平溪區"
            :class="{
              'active-district':
                targetDistrict === '平溪區' ||
                selectedIndex === 35,
              'initial-animation-37': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['平溪區'] / districtData.highest)"
            :fill="districtColor"
            d="M548.4 316.7 548.5 315 547.7 313.2 548.4 312.7 550.3 312.5 551.5 310.4 552.9 310.2 553.8 308.9 553.8 306.5 555.8 303.6 554.3 300.6 552.6 296 550.6 293.7 550.4 292.9 551.4 292.6 552.2 288.3 551.8 286 550.4 284.3 548.9 285.9 547.6 285.9 544.2 287.1 543 283.9 540.6 281.8 538.1 279 538.9 277.1 536.4 275.8 534 271 534.7 269.8 536.7 268.5 535.6 265.5 535.6 263.6 539.3 262.2 539.7 261.8 542.9 262.5 544 260.9 546 259.7 547.1 256.5 546.6 254.2 547.9 253.2 550.6 249.2 551.6 248.4 553.8 248.2 556 247 556 246.3 558.1 243.8 559.7 244.2 560.8 243.3 564.2 242.2 566.4 243.8 571.8 243.7 573.6 242.7 574.1 241.5 576.8 239.4 579.5 238.9 581.1 237.9 584.2 238 587.2 239.7 588.7 238.5 590.2 235.7 591.8 234.4 594.1 233.8 595.4 230.2 597.4 227.7 599.2 226.7 601.6 226.8 603.6 225.4 604.8 225.5 609.1 222.1 613.3 220.9 614 221.2 615.6 222.2 617.6 224.7 620.6 230 622 231.1 621.1 233.3 621.6 236.5 623.4 239.3 626.4 237.6 628 237.9 629.4 238.8 628.7 243 628.9 244.8 630.3 248.6 629.8 250.2 631.6 253.6 631.2 254.2 630.2 253.8 627.8 254.8 625.1 257.6 624.8 260 622.9 263.1 621.5 263.1 617.2 264.5 611.5 270.6 609.9 271.3 608.3 271.1 604 276.5 604 280 600.4 283.2 599.1 285.8 599.4 286.7 597.9 287.3 595.8 290.6 594 291.4 592.9 292.6 591 293.1 586.1 296.8 587.3 299.8 589.2 300.5 590.7 303 593 304.3 595.5 304.6 596.5 307 593.2 312 590.2 312.1 586.5 311.1 585.3 312.8 583.9 313.1 582.3 314.6 580.6 313.9 578 314.9 576.9 314.4 574.2 316.8 573.4 317.1 571.8 316.2 570.4 316.3 568.9 311.9 566.5 312.5 565.4 311.7 563.2 315.7 561.3 315.1 555.4 316.7 552.4 316.5 550 317.3 548.4 316.7 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(35)"
          />
          <path
            data-city="新北市"
            data-name="雙溪區"
            :class="{
              'active-district':
                targetDistrict === '雙溪區' ||
                selectedIndex === 36,
              'initial-animation-41': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['雙溪區'] / districtData.highest)"
            :fill="districtColor"
            d="M610.6 384 609.7 383.7 607.6 381.3 606.5 381.2 605.5 377.8 605.2 374.3 604.5 372.6 602.4 370.3 599.8 368.9 601.7 366.2 602.1 364.7 602.8 361.2 605.5 359.1 605.5 356.4 606.3 355.5 606.5 352.9 609.4 349.5 607.8 345.4 610.5 339.7 611.6 339.3 612.6 336.2 610.7 334.6 610.8 333.2 609.9 330.5 610.5 328.9 610.3 327.1 611.6 325.3 611.4 321.5 612.9 318.9 613.2 314.6 612 311.1 611.6 308.4 606.1 308.8 604.9 309.8 602.3 309.8 600.6 308.2 597.5 306.6 596.2 303.7 593.3 303.3 591.4 302.3 589.9 299.7 588 299 587.3 297.2 591.5 294.1 593.4 293.5 594.6 292.2 596.5 291.4 598.5 288.1 600.6 287.2 600.2 285.9 601.3 283.8 605 280.4 605 276.9 608.8 272.2 610.1 272.3 612.1 271.4 617.7 265.4 621.7 264.1 623.5 264.1 625.7 260.3 626.1 258.1 628.4 255.7 630.3 254.9 631.6 255.4 632.4 254.2 633.4 254.3 635.5 252.6 636.5 250.7 637.9 250.7 638.8 251.6 641.4 251 644.1 251.8 647.2 252.1 648 248.5 647.2 247.5 647.1 245.6 644.3 239.8 645.1 238.7 644.4 237.6 644.4 234.9 643.7 232.2 644.8 230.5 645.9 228.2 646.1 225.9 648 224.3 649.1 224 651.3 221.9 652.7 219.9 653.1 217.6 654.8 216.1 656.9 211.9 658.7 209.6 662.2 209.9 663.5 204.9 664.4 203.5 666.2 202.9 670.2 202.9 674.3 204.1 674.8 205.1 679.7 205.5 681.2 204.3 682 204.6 683.1 206.5 682.3 211.5 684.3 215.2 683.6 218.9 683.2 221.1 683.7 223.2 684.9 224.4 685.8 225.6 687.8 225.6 688.9 228.4 691.7 233.6 692.4 236.3 692.3 239 693.3 240.4 693.5 241.9 694.4 243.6 693.6 244.2 693.2 247.3 693.6 248.2 692.1 250.3 692.4 251.7 694.2 252.4 694.6 254.2 696.7 254.4 697.8 255.3 699.5 255.6 699.9 256.5 698.6 260.4 697.6 262.2 697.8 263.6 696 266.3 697.3 269.7 695.7 270.3 694.1 273.2 692.6 273.5 692.7 275.6 694.9 276.5 695 277.7 692.1 279.5 690.9 278.9 688.4 279.9 685.5 280.1 685.5 281.1 683.5 284 684.1 286.4 682 289.2 681.5 292.9 678.4 297.9 678 299.5 676.3 300.5 673.8 302.9 671.7 307.1 672.8 308.4 672.2 309.5 670.6 310.5 670.7 312.5 670.1 316.1 669.3 318.2 670 323.7 669.1 325.7 669.5 327.2 667.9 327.4 663.8 329.2 663.5 330.6 662.8 330.9 660.8 329.3 659.3 330.5 658 330.2 656.2 331.6 655.9 332.8 654.6 333.5 654.1 335.3 652.7 336.1 652.9 339.3 652.1 342.2 650.8 343.7 650.6 345.4 651.4 348 653.8 351 657.1 352.3 658 354 658.2 356 659.4 358.2 659.2 359.3 663.2 361.6 663.1 363.7 661.9 364.9 656.3 369.1 655.6 371.3 653.7 372.9 650.6 376.3 650 377.6 647 380.7 646 380.9 644.5 382.5 641.5 382 640.8 382.7 639.7 382.1 636.7 382.9 634.5 384.4 633.6 384.5 631.2 382.8 627.6 380.8 626.2 382.5 626.2 383.8 622.8 384.8 621.5 385.9 620.4 385.4 619.4 386.2 614.4 386 613.4 387.3 612.4 387.3 610.6 384 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(36)"
          />
          <path
            data-city="新北市"
            data-name="貢寮區"
            :class="{
              'active-district':
                targetDistrict === '貢寮區' ||
                selectedIndex === 37,
              'initial-animation-42': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['貢寮區'] / districtData.highest)"
            :fill="districtColor"
            d="M673.9 328.5 672.5 328.6 670.6 327.3 670.1 325.8 671 323.8 670.3 318.3 671.1 316.4 671.8 312.6 671.6 311 673 310.3 674 308.3 672.9 307 674.6 303.5 676.9 301.3 678.8 300.1 679.3 298.3 682.5 293.2 682.9 289.6 685.2 286.6 684.6 284.2 686.5 281.4 686.5 281 688.6 280.8 690.8 280 692.2 280.7 696.1 278.3 695.8 275.8 693.7 274.9 693.6 274.3 694.7 274.1 696.4 271.1 698.6 270.3 697.1 266.4 698.8 263.9 698.6 262.4 699.5 260.8 701 256.4 700.2 254.7 698.2 254.4 697 253.5 695.4 253.3 695.1 251.6 693.3 250.9 693.2 250.5 694.7 248.3 694.2 247.2 694.5 244.7 695.7 243.9 694.4 241.6 694.3 240.1 693.3 238.7 693.4 236.2 692.6 233.2 689.8 228 688.5 224.7 686.3 224.6 685.7 223.8 684.6 222.7 684.2 221.1 684.6 219.1 685.3 215.1 683.3 211.3 684.1 206.3 683.1 204.5 685.1 204.2 687.8 201.6 692.6 199.3 696.8 199 699.9 198.4 701.6 195.9 699.3 190.8 699.4 189.9 700.7 188.7 701.5 186.9 703.5 186.7 705.3 184.5 709.8 183.2 710.1 183.9 715.6 182 719.4 180.5 718.2 181.8 718.4 182.2 716.9 182.6 716.4 183.7 713.7 185.5 713.7 187.1 715.6 187.4 716.8 188.6 721.3 186.7 722.2 188 722.2 190.7 722.6 192.2 722 192.1 722.7 195.1 721.8 194.8 720.4 195.5 718.6 198.7 718.8 200.5 716.8 202.3 718.8 202.5 718.5 203.7 717.6 204.1 715.2 207.9 714.3 212.9 714.8 215.3 716.5 217.4 715.8 219.7 716.1 222.1 717.1 223 718.9 222.6 719.8 224.1 721.5 225 721.9 226.4 723.1 226.3 723.1 227.2 725.4 231.3 729 233.3 729.8 235.7 729.2 236.5 725 236.9 724.5 240.4 729.1 240.2 728.5 243.8 727.1 245.4 727.7 246.2 727.1 246.5 726.4 250 727.4 251.5 726.5 253.2 726.7 255.6 728.7 258.8 730.2 262.8 733 266.2 737.7 270.8 739.7 271.9 741.4 273.9 743.1 274.9 745.3 275.2 747.9 272.9 750.5 272.5 751.7 273.3 756.1 273.3 758.6 272.8 763.9 269.8 766.3 270.1 768 269.4 768.7 270.1 770.3 269.8 772.6 271 774.6 271.4 775.9 272.9 779.3 274.7 779.1 275.3 779.1 280.6 780.5 282.7 783.6 280 785.9 276.3 787.6 275.7 788.1 277.5 790.3 280.5 792.5 279.7 792.5 280.4 793.6 283.1 792.8 285.8 792.9 287.4 792.2 290.4 790.5 290.8 788.6 290.5 784.7 291.3 784.2 293.1 782.2 293.5 782.1 294.3 776.9 296.9 775.6 299.3 774.1 300.6 772.4 301.1 770.4 300 768.2 301.3 767.4 304.7 766.1 306 763.7 307.3 762.1 306.3 760.6 307.4 760 308.9 758.3 306.6 757.4 304.7 755.7 304 754.4 303.7 752.8 304.8 750.6 303.9 746.7 303.9 744.3 305.3 741 304 739.7 305.8 737.8 306.7 737.5 307.4 736 307.1 735 308.8 732.3 308.8 731.5 310.9 729.2 310.7 727.4 312 726.1 311.5 722.6 313 720.9 311.9 719.5 312.9 716.7 312.3 714.1 313.2 712.2 314.8 711.6 316.4 710.6 315.7 708.8 315.9 707.8 317.6 706.9 316.7 705.4 317.1 703.1 319.6 702.3 322 700.5 324 699.6 324 696.1 325.8 694 326.1 693.3 327.4 691.3 326.6 688 326.7 685.4 328 684.1 328 682.6 329.2 680.1 329.1 679 329.8 673.9 328.5 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(37)"
          />
          <path
            data-city="新北市"
            data-name="金山區"
            :class="{
              'active-district':
                targetDistrict === '金山區' ||
                selectedIndex === 38,
              'initial-animation-3': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['金山區'] / districtData.highest)"
            :fill="districtColor"
            d="M433.7 137.3 429.9 136.7 427.8 135.5 428.2 133 430.6 130.8 432.6 128.3 433.2 126.2 431.3 121.9 432.9 120.4 432 117.7 433.8 115.5 433.3 111.7 432.6 111 434 109.7 430.8 108.5 429.1 109.5 426.7 108.4 425.8 109.5 423.3 110.2 421.8 109.1 418.6 109.1 416.9 107.8 416.7 105.9 417.6 102.6 417.1 100.3 415.7 97.6 415.5 95.4 413 94.8 415.1 91.9 416.6 92.1 418.3 90.9 419.8 88 422.6 86 428.2 85.5 430.9 83.3 432 81.1 431.7 78.2 433.7 73.6 436.4 71.6 437.4 70.2 442.3 65.1 444.4 64.6 445.4 64.3 447.4 60.8 447.6 59.4 450.1 55.7 450.4 55.5 456.4 54.2 458.5 54.2 460.7 54.9 463 51.5 463.4 49.6 462.1 45.9 462.2 42.4 461.4 41.5 462.7 35.7 464.3 34.5 468.8 39 472.3 43.9 473.1 44.5 474.8 48.5 475.4 49.2 475.3 50.8 476.5 57.5 475.9 63.2 475.5 64.1 475.6 67.5 477.5 70.6 478.5 71 479.6 72.8 481.9 75 483.3 76.1 486.6 76.8 487.2 76.8 484.4 79.4 487.6 78.7 489.8 76.9 489.2 75.1 490 74.6 489.7 75.3 491.3 77.6 491.7 77.6 490.4 78.9 490.5 79.9 489.5 80.4 489.3 82.7 485.8 83.9 483.7 85.7 483.4 87.3 482.8 88.8 482.4 89.2 479.3 89.4 476.1 91.5 474.6 91.9 472.1 93.6 469.3 96.7 467 98.5 465.5 101 463.8 100.8 460.8 103.5 460 105.1 457.9 107.6 456.3 108 455.3 109.9 457 111.3 456.1 113.9 455.8 116.6 454.7 119.2 452.7 122 452.6 125.1 451.3 126.5 450.1 126.6 449 129.4 444.6 135 443.8 136.7 443.2 136.7 440.6 138 438.2 138.5 436.8 139.1 433.7 137.3 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(38)"
          />
          <path
            data-city="新北市"
            data-name="萬里區"
            :class="{
              'active-district':
                targetDistrict === '萬里區' ||
                selectedIndex === 39,
              'initial-animation-9': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['萬里區'] / districtData.highest)"
            :fill="districtColor"
            d="M451.4,169.6v-2.3c0,0-.7-1.4-.7-1.4l.3-1.5-2.1-1.3-1.2-1.5-1.8-.9-1.1-2.1-1-.8.2-1.2-1.7-3-.2-2.2-3.6-2,2.1-3v-1.8c-.1,0-1.3-2.6-1.3-2.6l.4-1.7-.5-1.1,1.9-.3,2.6-1.3h.9s1-2.2,1-2.2l4.5-5.7.9-2.3h1c0-.1,1.8-2,1.8-2v-3.2s2-2.7,2-2.7l1.2-2.8.3-2.8,1-3.2-1.5-1.3.4-.8,1.5-.4,2.4-2.8.7-1.6,2.5-2.2h2c0,.1,1.6-2.7,1.6-2.7l2.2-1.7,2.8-3.1,2.2-1.5,1.5-.3,3.1-2.1,3.2-.2.9-.8.7-1.8.2-1.4,1.7-1.4,3.1-1.1,2.8,6,2.1,2.8,3,3.1,2.2,1.8,1.1,1.2.5-.7v.8c.1,0,6.5,4.1,6.5,4.1l3.7.3v-1.6c.1,0,1.1-.2,1.1-.2l1.1,1.6,1.7.2,3.1-3.6,1.6-1.2.5,1.6-1.3,1.6h2.9c0,.1.8-2.7.8-2.7l4-2.4,1.5-1.6.3.3-2.3,1.7-.6,2.1-1.4,2.2,1.5,1.3h1.1s-3.3,3.9-3.3,3.9l-.7,1.4h-1c0,0-2.3,4.2-2.3,4.2v2.6s1.5,3.7,1.5,3.7l1.1,1.8,3.5,4,1.3-.8-.2.8,3.7-.2v-.8c0,0,1.2,1,1.2,1l1.6.7.9,2.2h.8s-2.3,6.1-2.3,6.1l-1.6.4-.3,1.6-4.8.7-2,1.9-1.9.9-.9,1.7-2.2,1.3-1.3-.6-1,1.5h-.9c0,0-2.2,1.8-2.2,1.8l-.9,1.6h-5c0,0-1.8,1.2-1.8,1.2l-.5,1.1-2.4.3-.7.7-2.3-.3-3.8.4-2.4,2.9-3.2,1-1.6,2.9-4.5-.6-1.6.7-2.1-.9-1.1,1.5-2.4.8-1-.4-5.1,1.9-1.8,2.2-2.2-.4-1.9.4-2.8,1.5-1.7-.2-1,1.7-6.5,4.9-1.2.6-1-.2ZM529.6,93.4l.5-1.8,2.5-1.9v.2c0,0,.3,1.2.3,1.2l-4,3.1.7-.8Z Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(39)"
          />
          <path
            data-city="新北市"
            data-name="烏來區"
            :class="{
              'active-district':
                targetDistrict === '烏來區' ||
                selectedIndex === 40,
              'initial-animation-39': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['烏來區'] / districtData.highest)"
            :fill="districtColor"
            d="M350.2 598.6 348.6 599.8 345.9 599.4 344.7 599.8 344.2 598.6 341.5 595.2 341.1 591.3 339.9 589.9 339 585.6 340.4 582.8 340 579 336.3 578.3 335.7 578.8 333.6 577.5 330.8 574.4 327.9 572.9 324.5 572.3 321 570.5 319.5 570.1 318.5 567.6 318.2 564.1 315.1 561.6 312 553.9 311.5 550.9 309.1 550.3 307.5 548.4 306 547.4 306.8 544.9 306.5 543.5 304.8 541 304.9 538.9 303.8 535.8 302.5 534.7 302.3 532.8 301.2 530.7 301.6 528.8 300.9 525.3 299.2 522.8 298.4 520.2 298.8 518.9 296.7 517.5 296.6 516.5 298.2 513.1 303.2 508.6 306.9 507.6 309 505.7 311.1 501.7 312.6 500.5 313.9 500.4 315.9 499.2 317.1 496.9 319 495.1 318.4 492.9 319.6 491.5 319.6 490.4 320.1 489.8 322.3 490 324.7 488.3 323.9 483 327.2 480.6 329.6 476.9 333.1 476.3 335.4 475.3 338.5 472.1 339 469.6 341 468.8 343.4 467.1 346.1 467.3 347.8 465.4 348.4 463.6 346.6 460.1 345.4 459.4 345.9 458.2 348 455.3 348.3 452.3 350.4 450 353.4 449.8 357.2 447.7 357.5 444.6 358.6 442.9 359.2 440.1 359 437.6 359.4 435.2 358.6 433.3 356.8 432.5 355.8 431.1 355.9 428.3 352.2 423.3 354.3 421.4 357.3 417.8 361.1 415.9 363.4 413.5 364.8 413.1 367.4 411.2 369.4 409.2 372.3 407.8 377.2 405.9 379.4 403.8 381.8 403.4 384.3 403.5 386.9 402.1 389.7 399.6 391.8 396 394.4 394.3 396.1 394.3 398.7 397.2 401.2 399.1 402.7 398.7 404.7 396.6 407.9 396 410.1 396.8 411.8 396.9 415.8 400.3 416.4 406.2 416.1 409.6 417.5 409.6 419.5 409.2 421.7 409.7 424 411.9 426.2 411.6 428.2 412.4 429.6 412.3 434 413.8 436.6 416.2 438.1 416.8 439.2 419 440.6 420 442.9 419.8 444.7 421.8 448 422.7 454.8 422.9 460.4 425.1 462.4 424 464 424.3 465.1 422.8 468.9 424.4 472 424.4 474 426.3 475.7 426.7 477 428.5 480.1 424.8 482.3 424 483.8 425.2 484.8 425.1 485.6 426.1 489.9 428.6 491.8 430.1 493.5 433.7 495.7 435.6 498 434.4 502.2 435.5 503.6 435.2 506.6 437.1 509.4 435.9 509.8 436.2 512.8 435.5 513.2 436.2 517.1 435 519.8 435.7 521.7 435.4 522.3 436.7 524 436.8 525.2 439.7 527.3 441.2 534.1 442 534.8 442.5 536.3 442.9 538.1 445.1 535.1 448 533.8 448.8 531.4 447.6 530.6 449 528.8 448.7 528.7 453.1 525.5 455.6 522.6 456.7 521.2 458.3 523.3 461.6 522.4 463.3 522.7 465.3 522.2 465.9 520.8 464.8 518 465.3 515.6 464.8 514 466.9 512.4 468 510 467.7 507.9 465.5 505.7 464.1 505.2 465.6 502 467.8 500.5 469.4 498.5 470.3 498.4 470.9 492.5 470.6 490.3 469 488.6 469.2 487.1 467.7 485.7 472.1 484.6 472.4 483 471.5 480 471.1 478.5 472.4 473.7 472.6 470.9 473.7 468.5 472.6 468.9 475.9 468.7 478.4 467.6 480 468.6 484.9 468.5 485.7 466.7 486.6 465 488.2 461.7 487.1 458.2 487.6 454.9 487.1 451.8 491.4 449.6 491.2 445.9 492.8 441.4 493.2 439.3 492.5 440.8 496.3 440.6 498.5 441.6 499.8 441.7 501.7 444.3 507.5 442.7 510.3 443.2 512.6 441 514.5 438.7 517.6 438.6 520.4 437.4 521.9 437 524 438.5 528.3 441.9 529 443 530.5 442.1 531.7 440.3 532.3 439.3 533.7 439.6 535.4 442.1 537.7 442.4 539.1 441.5 543.3 442 545.5 440.9 547.6 441.8 548.8 444.5 548.8 444.3 549.6 441.3 551.3 438.6 553.2 436.6 555.9 435.7 556.4 432.9 556 429.4 554.2 428 554.4 427.3 556.1 427 561.8 425.6 565.2 425 565.8 423.4 565.3 421.9 561.9 419 564.4 417.5 564.3 416.1 563.4 414.3 563.4 410.9 565 408.9 565.3 407.5 567.7 404.4 570 401.3 569.5 398.2 570 395.8 573.5 393.2 576 394 577.8 394.2 580.3 393.2 581.1 393.1 584.9 392.3 586.3 389.8 586.2 388.8 586.9 386.4 586.8 384.3 585.8 384.1 589.2 381.7 591 374.4 591 373.4 590.1 371.4 590 370 591.1 367.3 592.1 365.5 594.6 363.6 594.8 360.4 596.1 358.5 598.4 355.2 600.4 350.2 598.6 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(40)"
          />
        </g>
        <g
          class="districtchart-chart-district-metrotaipei"
        >
          <path
            data-city="臺北市"
            data-name="北投區"
            :class="{
              'active-district':
                targetDistrict === '北投區' ||
                selectedIndex === 0,
              'initial-animation-7': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['北投區'] / districtData.highest)"
            :fill="districtColor"
            d="M362.5 201.2 361 201.1 359.9 200.3 359.6 198.7 359.5 192.3 359 189.1 357.3 186.6 353.3 184.2 350 184.5 345.5 186.7 340.3 187.7 336.4 188.6 333 187.6 330.6 185.7 329.8 183.8 327 178 331.2 176.7 332.1 175.3 331.3 170.4 332.8 169 335.6 165.6 337.9 164.1 338.5 162.2 341.5 159.9 342.3 157.9 346.1 154.6 346.7 152.8 347.9 151.4 350.7 151.7 351.8 148.5 354.8 144 355.6 142.1 358.2 140 361.1 138.6 361.4 136 363.4 133.7 363.3 132.1 364.2 130.6 365.7 129.5 365.8 129.6 365.4 132.3 367.6 132.3 371.5 133.9 373.4 132.6 375.1 133.4 377.8 134 379.2 133.5 381.3 128.4 380.6 124.7 384 121.2 386.5 121.3 390.3 120.4 393.2 117.4 396.5 117.3 398.5 114.9 398.8 111.1 400.2 109.1 403.2 107.1 404.9 108.5 406.4 107.6 407.1 103.7 406 102.6 406 101.6 407.4 101 408.8 97.2 410.4 97 412.2 95.6 414.6 96.2 414.7 97.9 416.1 100.7 416.5 102.6 415.7 105.8 416 108.3 418.3 110.1 421.4 110.1 422.9 111.2 421.8 112.4 418.2 115.2 419.1 117.7 419.2 119.9 417.8 121.7 416.7 124.9 414.7 125.4 413 128.8 414.9 132.2 413.2 138.1 413.3 139.2 411.3 141 408.7 141.6 407 145.8 406.6 147.1 406.3 148 403.9 150.5 402.1 157.8 400.7 158.3 400.2 159.3 397.6 158.5 396.7 159.4 392.3 161.6 390.9 161.8 389.6 163.2 388.1 163.6 387.2 165.1 387.7 167.1 387.4 168.7 387.8 173.1 386.4 175 386.3 175.9 383.7 176.7 383 179.4 381.6 181.2 381.2 183.1 382.3 184.1 382.7 186.2 383 187.1 382.4 188 380.8 188.3 379.2 190.6 379.1 192.8 377.6 195.1 376.9 195.5 375.8 199.3 371.5 200.5 369.3 202.4 362.5 201.2 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(0)"
          />
          <path
            data-city="臺北市"
            data-name="士林區"
            :class="{
              'active-district':
                targetDistrict === '士林區' ||
                selectedIndex === 1,
              'initial-animation-12': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['士林區'] / districtData.highest)"
            :fill="districtColor"
            d="M382.2 221.2 380.9 220.2 377.3 218.4 375.5 217.1 371.2 218.7 369.3 219.2 365.9 219.4 364.8 216.6 363.1 213.1 360.8 209.6 357.9 206.9 353.8 202.7 350.6 200.2 348.2 199.1 344.5 197.6 336.7 196.9 333.3 196.9 331.2 196.3 328.9 194.8 325.5 191.2 325.4 189.8 327.3 186.9 329.1 184.9 329.8 186.4 332.5 188.5 336.3 189.6 340.5 188.7 345.8 187.6 350.3 185.5 353.1 185.2 356.6 187.3 358.1 189.5 358.5 192.4 358.6 198.8 359 200.9 360.7 202.1 362.3 202.2 369.5 203.5 372 201.4 376.6 200.1 377.8 196.2 378.4 195.8 380 193.1 380.2 190.9 381.4 189.2 383.1 188.9 384.1 187.2 383.7 185.9 383.3 183.6 382.3 182.7 382.5 181.7 384 179.8 384.5 177.5 387.2 176.6 387.4 175.3 388.8 173.4 388.4 168.7 388.7 167.1 388.3 165.3 388.7 164.5 390.2 164.1 391.4 162.7 392.6 162.5 397.3 160.2 397.9 159.6 400.8 160.5 401.4 159.1 402.9 158.6 404.8 151 407.1 148.5 407.5 147.4 407.9 146.1 409.4 142.4 411.7 141.9 414.3 139.6 414.2 138.2 415.9 132.1 414.1 128.8 415.4 126.3 417.4 125.7 418.7 122.2 420.2 120.2 420.1 117.5 419.4 115.6 422.4 113.1 424.7 110.9 426.9 109.6 429.1 110.6 430.9 109.6 432.1 110.1 431.2 110.9 432.4 112.1 432.8 115.2 430.9 117.4 431.8 120.1 430 121.6 432.2 126.3 431.7 127.8 429.8 130.1 427.3 132.5 426.7 136 429.6 137.7 433.4 138.3 436.8 140.2 438.1 139.5 438.5 140.5 438.1 142.2 439.4 145 439.5 146.3 437 149.9 441.1 152.2 441.3 154 443 156.8 442.8 158.2 444.1 159.3 445.2 161.5 447.1 162.4 448.3 163.9 449.9 164.9 449.7 166 450.4 167.5 450.5 170.4 452.6 170.8 453.1 170.5 452.8 171.4 450.2 174.2 448.1 174.1 447.1 178.4 445.4 180 443.9 184.1 443.1 185.1 441.4 184.4 439 185.6 438.9 185 436.3 185.4 434 190.9 431.9 192.2 430 191.8 428.9 193.6 427.2 192.3 424.6 192.2 421.6 193.5 419.7 196.1 418.4 199.4 415 200 414.4 200.6 411.3 200 409.5 203.6 407.8 204.4 406.9 205.7 403.2 206.9 401.1 207.5 400.1 207.6 399.4 206.4 395.6 206.1 391.9 208 387.5 212.7 385.9 213.3 383.8 215.9 382.8 215.2 381.7 217.5 383.1 222.6 383 222.7 382.2 221.2 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(1)"
          />
          <path
            data-city="臺北市"
            data-name="內湖區"
            :class="{
              'active-district':
                targetDistrict === '內湖區' ||
                selectedIndex === 2,
              'initial-animation-19': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['內湖區'] / districtData.highest)"
            :fill="districtColor"
            d="M423.6 243.4 423.2 242.2 422.6 236.7 421.3 233.2 423.4 228.2 423.4 225.2 422.7 223.3 421.5 221.8 422.1 220.5 420.4 219.9 416.7 218.7 415.5 217.4 414 213.6 412 212.7 411.2 213 410.4 210.7 408.5 210.1 407.2 209.2 407.4 209.2 407.7 206.3 408.5 205.2 410.2 204.4 411.9 201.1 414.7 201.6 415.4 201 419.1 200.3 420.6 196.6 422.3 194.3 424.8 193.2 426.8 193.3 429.1 195.1 430.5 192.9 432.1 193.3 434.8 191.5 437 186.3 438 186.1 438.2 187.1 441.4 185.5 442.8 186.1 444.3 190.4 446.3 191.3 452.1 192.8 453.6 192.8 454.5 194.1 456.8 195.2 459.9 196.1 461.5 198.4 464.8 200.7 466.6 202.5 468.2 202.3 468.7 203.1 467.8 204.9 468.8 207.1 468.3 208 470.6 210.3 470.7 211.7 469.8 213.3 470.3 214.4 468.5 215.6 467.1 217.4 466.2 220.5 466.1 222.6 465.6 222.2 464.1 224.2 464.8 227.3 462.8 229 461.6 229.2 461.6 231.7 460.7 232.5 458.7 231.9 456.8 233.5 455.3 235.4 454.1 236.1 451 236.9 446.5 237.2 444 236.6 441.5 236.2 439.9 237.2 437.5 239.7 434.9 241.6 430.5 242.8 429.6 242.9 425.7 244 423.6 243.4 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(2)"
          />
          <path
            data-city="臺北市"
            data-name="中山區"
            :class="{
              'active-district':
                targetDistrict === '中山區' ||
                selectedIndex === 6,
              'initial-animation-17': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['中山區'] / districtData.highest)"
            :fill="districtColor"
            d="M392.8 250.7 391.2 250.5 389.8 250 382.3 247.8 379.3 247.5 378.5 247.4 379.3 246.2 379.4 243.8 379.7 239 379.5 236.4 378.6 234 378.7 231.1 379 228.8 379.4 225.7 379.7 224.1 380.8 221.4 381.5 221.9 382.7 224.2 384.2 223 382.8 217.6 383.2 216.7 383.9 217.3 386.5 214.2 388.1 213.5 392.5 208.8 395.8 207.1 398.8 207.4 399.6 208.6 401.3 208.5 403.5 207.9 406.7 206.9 406.5 208.1 403.8 208 408.1 211 409.6 211.5 410.5 214.4 411.9 213.7 413.2 214.3 414.6 217.9 416.2 219.5 420 220.9 420.7 221.1 420.6 221.5 419.5 221.8 415.6 224.4 414.6 224.5 409.8 222.2 405.6 221.3 405.6 223.9 404.9 224.8 403.6 224.8 403.4 225.9 395.5 225.6 393.9 225.3 393.9 228.1 396.3 229.3 398.9 230.6 398.8 234.7 398.8 236.6 398.7 238.9 398.6 244.5 398.6 248.5 398.5 250.6 396.3 250.9 392.8 250.7 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(6)"
          />
          <path
            data-city="臺北市"
            data-name="大同區"
            :class="{
              'active-district':
                targetDistrict === '大同區' ||
                selectedIndex === 7,
              'initial-animation-16': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['大同區'] / districtData.highest)"
            :fill="districtColor"
            d="M366.3 246.2 367.5 242.5 367.6 239.8 367.3 236.4 367.7 233.3 367.9 231.5 368.1 228.6 367.9 225.1 366.2 220.4 369.5 220.2 371.5 219.7 375.3 218.3 376.8 219.3 380 220.9 378.7 223.8 378.5 225.5 378.1 228.7 377.7 231 377.6 234.2 378.5 236.6 378.7 239 378.4 243.7 378.3 245.9 377.5 247.2 373.2 246.3 373.1 246.3 371.6 245.7 370.2 247.5 366.3 246.2 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(7)"
          />
          <path
            data-city="臺北市"
            data-name="中正區"
            :class="{
              'active-district':
                targetDistrict === '中正區' ||
                selectedIndex === 8,
              'initial-animation-25': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['中正區'] / districtData.highest)"
            :fill="districtColor"
            d="M387.5 283.6 385.1 282.8 382.7 280.2 379.5 275.5 378.6 274.7 375.6 273.1 372.9 272.5 372.4 270.3 370.3 269.6 369.6 269.4 367.9 267.8 366 265.5 365.6 265 366.5 262 367.6 259.6 367.9 258.3 368.4 256.5 369.1 253.8 369.8 250.9 370.8 248.4 371.9 246.9 372.5 247.1 372.5 247.2 372.8 247.3 379.2 248.5 382.1 248.8 389.1 250.9 389.1 253.5 388.9 261.2 387.1 261.1 385.3 260.8 385 260.8 382.1 259.3 380.3 262.7 379.8 265.4 379.4 266.8 381 269.3 382.8 271.8 386.2 275.2 389.1 278.3 389.6 278.9 391.7 281.1 392.5 282.5 391.9 282.7 388.8 284.6 387.5 283.6 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(8)"
          />
          <path
            data-city="臺北市"
            data-name="萬華區"
            :class="{
              'active-district':
                targetDistrict === '萬華區' ||
                selectedIndex === 9,
              'initial-animation-24': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['萬華區'] / districtData.highest)"
            :fill="districtColor"
            d="M354.5 283.3 353.3 281.8 352.5 277.1 352.4 275.1 352.5 272.7 352.4 270.9 351 267.7 349.9 265.8 348.2 262.1 347.8 260.1 348 258.8 351.5 254.4 353.1 254 356.5 253.7 362.1 251.3 362.9 250.3 365.9 247.1 369.7 248.4 368.9 250.6 368.1 253.5 367.4 256.3 366.9 258.1 366.6 259.3 365.6 261.7 364.5 265.2 365.2 266.2 367.2 268.5 369.1 270.2 370 270.6 371.6 271.1 371.9 272.4 370.5 272.4 368.4 273 366.3 275.6 364.5 278.3 361.2 281.4 357.4 284.2 356 284.2 354.5 283.3 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(9)"
          />
          <path
            data-city="臺北市"
            data-name="大安區"
            :class="{
              'active-district':
                targetDistrict === '大安區' ||
                selectedIndex === 10,
              'initial-animation-26': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['大安區'] / districtData.highest)"
            :fill="districtColor"
            d="M415.2 285.3 411.5 281.4 410.1 281.5 408.8 282.1 406.4 284.4 405.6 283.8 403.4 283.6 400 285.3 394.4 285 393.7 282.6 392.5 280.5 390.4 278.3 389.8 277.6 386.9 274.5 383.5 271.1 381.9 268.7 380.5 266.7 380.8 265.7 381.3 263.1 382.5 260.6 384.6 261.7 385.1 261.8 387 262.1 389.9 262.2 390.1 253.5 390.1 251.2 391 251.5 392.7 251.7 396.3 251.9 399 251.6 401.4 251.4 403.2 251.6 406.3 251.9 406.7 252 407.5 252.1 407.8 252 409.1 251.7 410.3 251.5 410.3 254.4 410.2 257.8 410.1 262.2 410 265.5 409 267.2 409 267.2 405.7 270.4 409.5 274.3 411.5 276.4 415.1 281 415.5 283.2 416.9 284.4 417.3 285.6 416.8 286 415.2 285.3 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(10)"
          />
          <path
            data-city="臺北市"
            data-name="信義區"
            :class="{
              'active-district':
                targetDistrict === '信義區' ||
                selectedIndex === 5,
              'initial-animation-27': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['信義區'] / districtData.highest)"
            :fill="districtColor"
            d="M417.8 283.8 416.4 282.6 416 280.6 412.3 275.7 410.2 273.6 407.1 270.4 409.7 267.9 409.8 267.8 411 265.8 411.1 262.2 411.2 257.8 411.3 254.4 411.4 251.1 417.9 248.3 420.8 247.5 423.7 247.3 428 247.4 429.5 247.4 430 250.8 431.6 252.5 431.6 252.5 431.9 252.8 434 254.4 435.3 254.6 436.6 257.8 437.3 258.9 437.3 261.2 439.6 263.9 439.2 264.6 436.6 266.2 434.2 269.7 432.6 275.3 432.2 275.2 429.6 277 427.7 279.5 426.4 279.2 425.3 280.4 422.6 280.2 422.2 282.2 420.3 283.8 418.1 285 417.8 283.8 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(5)"
          />
          <path
            data-city="臺北市"
            data-name="松山區"
            :class="{
              'active-district':
                targetDistrict === '松山區' ||
                selectedIndex === 4,
              'initial-animation-18': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['松山區'] / districtData.highest)"
            :fill="districtColor"
            d="M406.8 251 406.4 251 403.4 250.6 401.5 250.3 399.5 250.5 399.6 248.5 399.6 244.5 399.7 238.9 399.8 236.6 399.8 234.7 399.9 230 396.8 228.4 394.9 227.5 394.9 226.5 395.3 226.6 404.2 227 404.4 225.8 405.4 225.7 406.6 224.3 406.6 222.6 409.4 223.2 414.4 225.6 416 225.4 419.9 222.7 420.8 222.5 421.8 223.8 422.4 225.4 422.4 228 420.3 233.1 421.6 236.9 422.2 242.4 422.8 244.2 425.7 245 429.2 244.1 429.4 246.4 428 246.4 423.7 246.3 420.6 246.5 417.6 247.4 410.4 250.5 410.4 250.5 408.9 250.8 407.6 251 407.4 251.1 406.8 251 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(4)"
          />
          <path
            data-city="臺北市"
            data-name="南港區"
            :class="{
              'active-district':
                targetDistrict === '南港區' ||
                selectedIndex === 3,
              'initial-animation-28': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['南港區'] / districtData.highest)"
            :fill="districtColor"
            d="M428.7 280.5 428.5 280.1 430.3 277.7 432.4 276.3 433.3 276.5 435.1 270.2 437.3 266.9 439.9 265.4 440.9 263.8 438.3 260.9 438.3 258.5 437.4 257.3 436 253.7 434.4 253.5 432.6 252 431.6 251.1 430.9 250.4 430.5 247.2 430.4 246.9 430.2 243.8 430.7 243.8 435.4 242.5 438.2 240.5 440.5 238 441.7 237.2 443.8 237.6 446.4 238.2 451.2 237.9 454.5 237 456 236.2 457.5 234.2 458.9 233 460.7 233.5 464 235.4 466.2 239.3 464.5 240.3 464.4 241.5 464.1 242.4 460.6 244.8 460.7 247 461 249 463 252.8 465.1 255.6 467.7 257.6 472 259.4 472.3 260.9 475.1 260.1 475.5 261 479 262.1 480.7 263.7 486.4 266.6 489.9 267.9 494 267.8 499.1 265.2 502.2 266.1 501.8 266.8 502 269.2 501.3 270.9 496 270.8 493 269.9 489.5 270.3 487.1 272.3 485.1 270.3 483.7 269.8 481.6 270.8 479.1 270.1 477.8 270.7 473.8 268.4 472.1 272.8 470.3 274.8 466.4 276.6 464.3 275.4 462 275.5 460.6 274.2 459.4 274.7 456.3 274.1 455.1 274.9 453.8 274.4 450.3 274.7 449.2 278.2 446.6 279.2 445 279.1 443 278 440.7 279.2 436.8 280.1 432.5 280.6 430.5 281.3 428.7 280.5 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(3)"
          />
          <path
            data-city="臺北市"
            data-name="文山區"
            :class="{
              'active-district':
                targetDistrict === '文山區' ||
                selectedIndex === 11,
              'initial-animation-34': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['文山區'] / districtData.highest)"
            :fill="districtColor"
            d="M442.9 329.3 441.7 326.5 439.3 326.3 436.9 327.5 435 327.6 433.7 326.2 431.8 326.2 428.9 324.3 424.8 324.2 424.6 326 423.6 326.9 422.5 326.5 418.3 326.8 413.5 325.9 411.9 323 411.2 319.5 410 318.3 409.5 315.2 408 314.5 407.4 312.4 407.8 309.2 408 307.5 406.9 305.8 404.3 305 404.6 306.8 403.8 307.8 401 308.5 400.1 308 399.6 304 397.5 304.2 395.6 304.5 393.5 303.9 393.3 303.2 393.5 300 391.7 297.1 389.9 300.6 389 301.6 388.6 299.9 389 297.9 388.3 295.3 388.3 294 388.8 292.7 391.4 291.1 389.7 287.3 389.4 285.5 392.3 283.6 392.9 283.4 393.6 286 400.2 286.3 403.6 284.6 405.3 284.8 406.5 285.7 409.4 282.9 410.3 282.5 411.1 282.5 414.6 286.1 417 287.2 418.1 286.1 420.9 284.6 423.1 282.7 423.4 281.3 425.8 281.5 426.7 280.3 427.5 280.5 427.9 281.3 430.4 282.4 432.7 281.6 436.9 281.1 441.1 280.1 443 279.1 444.3 279.9 444.2 281.1 443.3 282.5 442.6 286.4 443.2 290 444.6 289.7 446 291.1 447 292.7 447 294.6 444.9 297.8 444.9 299.6 445.8 300.3 445.5 301.5 447.7 302.7 447.9 304.5 446.8 304.8 446.2 307.1 446.7 309.6 446.9 312.2 445.7 313.3 446.6 315.5 450.1 317 451.3 318.2 454.4 317.6 458.8 318.7 460.6 320.6 462.4 321.2 463.4 322.2 462.3 323.9 461.5 323.4 459.8 324.5 458.2 324.6 455.5 326 453.8 327.7 451.7 327.6 448 329.6 446.6 329.4 444.5 330.2 442.9 329.3 Z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(11)"
          />
        </g>
      </svg>
      <svg
        v-if="cityName === '臺北市'"
        class="districtchart-chart-taipei"
        viewBox="0 0 413 550"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g>
          <path
            data-name="北投區"
            :class="{
              'active-district':
                targetDistrict === '北投區' ||
                selectedIndex === 0,
              'initial-animation-1': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['北投區'] / districtData.highest)"
            :fill="districtColor"
            d="m94.88095,249.57284c-14.1957,-1.13845 -15.68038,-2.82136 -15.75883,-17.86287c-0.07358,-14.11027 -2.04541,-18.8162 -9.28243,-22.15316c-4.82518,-2.22489 -5.16577,-2.22824 -13.81468,-0.13606c-4.87713,1.17982 -11.85611,3.38716 -15.50881,4.90525c-9.44781,3.92657 -14.35485,4.579 -18.63773,2.47804c-5.19239,-2.54712 -13.07369,-8.67732 -12.20772,-9.49537c0.40554,-0.38307 -0.17773,-1.56086 -1.29605,-2.61731c-1.18816,-1.12239 -2.03333,-3.87056 -2.03333,-6.6113c0,-4.27472 0.33791,-4.75432 3.81225,-5.41074c4.00852,-0.75734 6.59228,-3.8596 6.0592,-7.27516c-0.86533,-5.54445 1.89092,-11.65039 8.44006,-18.6972c3.74333,-4.02781 6.8061,-7.73328 6.8061,-8.23434c0,-1.12665 6.94872,-8.91563 14.29934,-16.02848c3.03443,-2.93632 5.9003,-6.53997 6.36855,-8.00813c0.55205,-1.73101 1.837,-2.66938 3.65524,-2.66938c3.08906,0 5.81801,-2.02917 5.81801,-4.32607c0,-4.75592 16.32824,-25.33368 20.102,-25.33368c0.57926,0 1.69106,-1.82586 2.47069,-4.05746c0.77968,-2.2316 2.17721,-4.65307 3.10574,-5.38102c0.92852,-0.72798 2.05549,-3.1731 2.50442,-5.43366c0.84284,-4.24431 2.34543,-5.20858 4.09367,-2.6271c0.55236,0.81564 3.4755,2.67571 6.49581,4.13348c5.18297,2.50158 5.68533,2.54236 8.94118,0.7255c3.18389,-1.7767 3.91413,-1.77551 9.47807,0.01542c3.31565,1.06721 6.17961,1.79757 6.36444,1.62296c1.93877,-1.8315 5.51741,-12.89401 5.51741,-17.05579c0,-3.8645 0.86996,-6.39702 3.18051,-9.25867c2.84029,-3.51776 4.0477,-4.02687 11.28738,-4.75926c7.04049,-0.71226 8.45062,-1.27612 10.71971,-4.28645c1.90061,-2.52147 3.6472,-3.46632 6.40759,-3.46632c4.7598,0 8.49441,-3.98187 8.5512,-9.11728c0.02297,-2.07819 0.56574,-5.08038 1.20613,-6.67154c1.34999,-3.35431 9.40282,-8.45955 11.91011,-7.55065c0.93927,0.34048 2.96771,-0.21461 4.50764,-1.23354c2.39634,-1.58558 2.70729,-2.62847 2.15755,-7.23596c-0.45066,-3.77701 -0.10046,-5.89525 1.17362,-7.09882c0.99872,-0.9435 2.12574,-3.17861 2.50427,-4.9669c0.46731,-2.20734 2.07446,-3.8758 5.00456,-5.19576c6.19764,-2.79194 7.31487,-2.47598 8.85697,2.50465c0.75767,2.44693 1.98856,6.05059 2.73555,8.00813c0.74688,1.95755 1.65149,4.96741 2.01017,6.6886c0.48175,2.31116 2.00237,3.63972 5.8156,5.08107c2.92169,1.10436 5.4391,2.94779 5.79853,4.2462c0.34925,1.26204 1.69569,2.61257 2.99189,3.00119c2.01807,0.60511 1.43384,1.52938 -4.06667,6.43369c-6.28882,5.60724 -6.40587,5.83664 -5.59194,10.96359c1.02919,6.48384 -3.7709,18.04195 -7.91845,19.06656c-4.20757,1.0394 -5.90666,6.06375 -4.03176,11.92238c1.99183,6.22401 1.99811,6.90198 0.14757,15.90754c-1.39515,6.78992 -1.8528,7.49666 -5.70684,8.81319c-2.97079,1.01481 -5.12613,3.05609 -7.40731,7.01534c-1.76945,3.07121 -3.2172,6.2358 -3.2172,7.03236c0,0.79658 -1.63825,3.40233 -3.64058,5.79058c-2.62203,3.12738 -3.89756,6.2853 -4.55908,11.28698c-1.09367,8.26882 -4.26332,11.56071 -11.49036,11.93337c-2.79573,0.14415 -6.83909,1.57172 -9.68446,3.41923c-2.68666,1.74445 -5.40879,3.17172 -6.04922,3.17172c-0.64039,0 -3.18028,1.4525 -5.64416,3.22778l-4.47974,3.22781l0.71288,10.39417c0.43684,6.36963 0.22874,10.67676 -0.53748,11.1241c-0.68766,0.4015 -1.76661,2.01282 -2.39763,3.58071c-0.68511,1.70225 -2.16214,2.85073 -3.66625,2.85073c-1.72723,0 -2.75678,1.02545 -3.27568,3.26257c-0.41624,1.79441 -1.63795,4.91375 -2.71496,6.93184c-1.79311,3.35993 -1.773,4.12737 0.23866,9.10334c2.22846,5.51222 1.87498,7.98921 -1.14006,7.98921c-2.45555,0 -5.27858,4.6883 -6.31609,10.48942c-0.50155,2.80438 -1.63247,5.36008 -2.51318,5.67933c-0.88067,0.31925 -2.5851,2.64149 -3.78756,5.16051c-1.79011,3.75015 -3.58226,5.18012 -9.89045,7.89179c-9.25247,3.97729 -7.87652,3.66486 -13.98358,3.1751z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(0)"
          />
          <path
            data-name="士林區"
            :class="{
              'active-district':
                targetDistrict === '士林區' ||
                selectedIndex === 1,
              'initial-animation-2': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['士林區'] / districtData.highest)"
            :fill="districtColor"
            d="m130.67355,292.3904c0,-0.5887 -1.55415,-1.67783 -3.45368,-2.4203c-1.89951,-0.74247 -4.94129,-2.12839 -6.75951,-3.07984c-2.83166,-1.48179 -3.91249,-1.49692 -7.53529,-0.10562c-2.32616,0.89334 -7.05516,1.94269 -10.50884,2.33187l-6.2794,0.70759l-5.02352,-9.7204c-3.46765,-6.70982 -7.47802,-12.09274 -12.94847,-17.38008c-4.35876,-4.21284 -9.69914,-9.77585 -11.86761,-12.36226c-6.54152,-7.80231 -16.98514,-11.61879 -36.01762,-13.16208c-17.07093,-1.38422 -18.77023,-2.04314 -25.89346,-10.04019l-3.39462,-3.81101l2.2973,-4.98435c4.42748,-9.60625 4.51493,-9.64575 10.05679,-4.54181c6.40893,5.90252 11.82541,7.65801 18.61141,6.03202c5.26124,-1.26064 10.93347,-3.52615 12.06076,-4.81708c1.40471,-1.60863 19.14964,-5.99322 21.75514,-5.37545c1.54226,0.36566 4.38983,2.22838 6.32792,4.13937c3.78795,3.73502 5.69971,12.50563 5.78463,26.53852c0.03899,6.44634 0.24839,6.89254 4.1227,8.78519c5.43861,2.65684 19.78195,4.13439 22.29188,2.29635c1.0361,-0.75875 4.71253,-2.58468 8.16986,-4.05763c5.43246,-2.31445 6.8367,-3.67588 10.34146,-10.02624c2.23044,-4.04149 4.39404,-8.76351 4.8079,-10.49344c0.79356,-3.31703 4.84537,-8.12538 6.84691,-8.12538c2.39166,0 2.69147,-5.93944 0.56532,-11.19868c-2.00951,-4.97068 -2.01855,-5.57877 -0.12336,-8.31117c1.12463,-1.62142 2.0448,-3.79543 2.0448,-4.83111c0,-1.03567 1.62127,-2.41694 3.60283,-3.0695c5.39002,-1.775 7.45014,-7.85453 6.71681,-19.82158c-0.39156,-6.38976 -0.14097,-9.71466 0.73222,-9.71466c0.73013,0 2.07434,-0.67117 2.98709,-1.49148c3.63746,-3.26906 18.1653,-9.56093 21.58784,-9.34951c5.50698,0.34018 10.2488,-5.02372 11.20858,-12.67903c0.50954,-4.06427 2.08921,-7.95456 4.66727,-11.49433c2.14339,-2.9429 4.47711,-7.07957 5.18592,-9.19258c2.05588,-6.1276 3.90165,-9.18062 5.55063,-9.18062c3.37668,0 7.29088,-4.67905 9.49521,-11.3506c2.77436,-8.39668 2.88161,-11.96566 0.47874,-15.93637c-2.84395,-4.69964 -3.11744,-7.30496 1.56985,-10.72428c3.95607,-2.88592 4.84295,-4.01582 7.32737,-10.1389c2.96184,-7.29972 1.82108,-10.57619 0.28885,-12.9645c-0.40853,-0.63679 0.01483,-0.49047 0.11529,-1.17494c0.11774,-0.80225 0.22889,-0.7003 0.47359,-0.9969c0.3194,-0.38711 2.93568,-1.93076 6.18465,-4.78903c5.58201,-4.91093 13.12307,-7.79163 15.99992,-6.11204c0.63134,0.36857 1.50278,0.12751 1.93657,-0.53565c0.4339,-0.66316 1.75735,-1.20574 2.94102,-1.20574c1.53468,0 2.55132,1.61643 3.54409,5.63535c1.22738,4.9692 1.10216,6.0216 -1.05958,8.90281c-1.34845,1.7971 -2.31899,4.46648 -2.1571,5.93196c0.16201,1.46546 -0.41633,4.05514 -1.28515,5.75484c-1.35786,2.65638 -1.21028,3.77435 1.05055,7.96088c1.44664,2.67878 2.63032,5.50753 2.63032,6.28612c0,0.77859 -2.82574,4.23809 -6.27941,7.68778c-5.06635,5.06054 -6.2794,7.07165 -6.2794,10.4108c0,2.27626 0.88728,4.97678 1.9716,6.00119c2.39233,2.2599 7.3714,3.56156 9.99116,2.61191c1.09175,-0.39574 2.84017,0.31736 4.04947,1.65165c1.29958,1.43375 3.69655,2.3481 6.15569,2.3481c3.80482,0 4.13926,0.36349 6.05083,6.57531c1.96521,6.38656 1.94411,6.70856 -0.73882,11.2181c-2.98373,5.01507 -2.23359,7.43276 2.77172,8.93348c1.31742,0.39502 2.76872,2.1508 3.22498,3.90172c0.45614,1.75093 1.49851,4.25125 2.31635,5.55628c0.81782,1.30503 2.24438,4.67806 3.17021,7.49564c1.30085,3.95907 3.27182,6.26163 8.6755,10.13545c6.76392,4.84901 7.00455,5.21589 7.37377,11.24453c0.32402,5.29383 0.8471,6.43237 3.47427,7.56316l3.09286,1.33117l-2.75138,2.76665c-1.51334,1.52165 -3.74277,2.76663 -4.95457,2.76663c-3.04074,0 -6.15017,3.20267 -6.15017,6.33447c0,1.43321 -1.37419,4.51625 -3.05381,6.85118c-1.67949,2.33492 -3.53317,5.99317 -4.11916,8.1294c-0.91366,3.33109 -1.68577,3.93815 -5.4234,4.26396c-2.39697,0.20894 -5.48832,0.63788 -6.86979,0.95316c-1.38146,0.31527 -3.22585,0.6141 -4.09869,0.66402c-0.87284,0.04993 -2.95031,2.9067 -4.61674,6.34838c-2.55395,5.27468 -3.97574,6.66861 -9.05051,8.8741c-3.93153,1.70856 -6.44769,2.21308 -7.25132,1.45393c-1.8366,-1.73485 -7.08732,-1.30719 -11.91705,0.97059c-4.41241,2.08098 -4.78441,2.53348 -8.21409,9.99209c-1.64746,3.58273 -2.99942,4.66042 -7.1805,5.72399c-2.83301,0.72063 -6.39155,1.01611 -7.9079,0.6566c-2.9144,-0.69101 -5.76349,2.05907 -9.83078,9.48939c-1.5956,2.91493 -3.67589,4.2054 -10.06582,6.24438c-7.38051,2.35507 -8.3582,2.4205 -11.684,0.78202c-8.03334,-3.95767 -12.58527,-1.81168 -27.70996,13.06371c-4.95546,4.87374 -9.55743,8.86137 -10.22666,8.86137c-1.8827,0 -2.75051,3.21946 -1.92231,7.13132c0.4777,2.25619 0.23681,3.54619 -0.66209,3.54619c-0.77708,0 -1.41286,-0.48165 -1.41286,-1.07032l0,0.00001z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(1)"
          />
          <path
            data-name="內湖區"
            :class="{
              'active-district':
                targetDistrict === '內湖區' ||
                selectedIndex === 2,
              'initial-animation-3': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['內湖區'] / districtData.highest)"
            :fill="districtColor"
            d="m228.52059,347.73805c-0.06129,-0.81564 -0.03466,-3.88543 0.0594,-6.82175c0.09406,-2.9363 -0.89758,-8.27506 -2.2037,-11.86389l-2.37461,-6.52514l2.92707,-5.93195c3.46184,-7.01564 3.66705,-10.73815 0.94656,-17.16131c-1.55515,-3.67154 -3.57436,-5.59621 -8.87958,-8.46358c-4.8507,-2.6217 -7.47148,-4.97799 -8.92653,-8.02547c-2.80878,-5.88306 -5.25147,-8.46648 -8.00512,-8.46648c-1.43108,0 -2.3171,-0.85343 -2.3171,-2.23197c0,-1.22757 -1.97801,-3.65719 -4.39558,-5.39913c-5.0035,-3.60521 -5.2672,-4.5257 -2.19779,-7.67214c1.20879,-1.23914 3.61066,-4.16074 5.33749,-6.49249c1.72684,-2.33175 4.08563,-4.25423 5.24167,-4.27219c1.15616,-0.01795 5.00444,-0.66556 8.55192,-1.4391c6.58345,-1.43555 7.94759,-2.95817 11.70054,-13.06042c0.41054,-1.10536 3.07339,-2.66833 5.91733,-3.47325c4.41442,-1.2494 5.67708,-1.18098 8.63179,0.46789c3.26115,1.81979 3.58227,1.79767 5.5584,-0.38252c1.15341,-1.27263 2.87421,-2.31388 3.82403,-2.31388c3.07063,0 8.31494,-4.8142 10.76906,-9.88556c1.9647,-4.06022 3.33699,-5.21871 7.6743,-6.47878c4.90133,-1.42396 6.69825,-1.23206 6.9611,0.74354c0.05802,0.43499 0.76433,2.29383 1.56986,4.13073c0.80564,1.83689 1.46461,4.04111 1.46461,4.89827c0,0.89103 4.70615,3.11698 10.98895,5.19757c6.04392,2.00149 14.03936,4.68027 17.76769,5.9528c3.72833,1.27255 8.6171,4.10416 10.86412,6.2925c9.27731,9.03521 12.76514,11.69033 15.35679,11.69033c2.35489,0 2.5748,0.38753 1.59785,2.81502c-1.20176,2.98626 0.8854,10.43441 4.30654,15.36674c1.54398,2.2261 1.56609,3.31069 0.14669,7.21086c-0.91893,2.52488 -2.56865,5.06541 -3.66617,5.64566c-1.09752,0.58026 -2.99314,4.11113 -4.21222,7.84637c-1.21884,3.73526 -2.93876,7.21829 -3.82165,7.7401c-0.94894,0.56094 -1.60514,3.33236 -1.60514,6.78001c0,4.57686 -0.52935,6.09889 -2.4609,7.0754c-1.35346,0.68428 -3.35647,3.02697 -4.45096,5.20598c-1.59045,3.16596 -2.57895,3.85547 -4.92117,3.4325c-2.22655,-0.40206 -3.73813,0.47035 -6.28883,3.6294c-3.83068,4.74438 -9.61188,7.26188 -19.55456,8.51528c-3.79903,0.47893 -7.8176,1.32212 -8.93006,1.87378c-1.69632,0.84113 -2.00024,0.29266 -1.88382,-3.39918c0.1232,-3.9031 -0.23285,-4.44291 -3.14007,-4.76164c-2.72138,-0.29832 -3.66329,0.40803 -5.53832,4.15236c-4.78603,9.5576 -9.34902,12.48797 -26.27704,16.87513c-11.12836,2.88409 -11.96465,2.95199 -12.11284,0.9836z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(2)"
          />
          <path
            data-name="中山區"
            :class="{
              'active-district':
                targetDistrict === '中山區' ||
                selectedIndex === 6,
              'initial-animation-4': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['中山區'] / districtData.highest)"
            :fill="districtColor"
            d="m145.96327,360.53769c-5.05996,-1.54766 -11.95892,-3.17236 -15.33103,-3.61048c-6.1177,-0.79485 -6.12916,-0.80478 -5.24269,-4.54798c0.48863,-2.06326 0.74248,-8.55627 0.56413,-14.4289c-0.87758,-28.89693 -0.66975,-34.36909 1.48718,-39.15086c2.03427,-4.50979 2.23013,-4.63115 3.94252,-2.44262c0.99109,1.26661 1.80193,2.73477 1.80193,3.26256c0,0.52781 0.92454,0.95964 2.05452,0.95964c1.69798,0 1.92621,-0.88432 1.31516,-5.09579c-0.40663,-2.8027 -1.09011,-5.95925 -1.5188,-7.01458c-0.45522,-1.12071 -0.0775,-2.08529 0.90823,-2.31915c0.9282,-0.22019 6.51741,-5.46236 12.42047,-11.64925c12.21697,-12.8044 15.72305,-14.53099 22.93896,-11.29629c4.50736,2.02055 5.55032,1.9318 13.60165,-1.15742c1.53421,-0.58867 2.64006,0.15233 4.03777,2.70563c1.05865,1.93395 3.28538,3.83888 4.94817,4.23313c2.05073,0.4862 3.25574,1.81503 3.74604,4.13071c0.5571,2.63107 1.60175,3.57997 4.55584,4.13809c3.02101,0.57078 3.83306,1.33957 3.83306,3.6288c0,3.73506 5.10654,9.45823 10.22702,11.46183l3.99847,1.56458l-4.81015,3.92804c-2.64564,2.16044 -5.49272,3.92806 -6.32674,3.92806c-0.83391,0 -3.98944,-1.27125 -7.01197,-2.82499c-3.02265,-1.55376 -7.07048,-3.17043 -8.99512,-3.59261c-3.05357,-0.66982 -3.70705,-0.30117 -5.12885,2.89319c-2.32686,5.22783 -7.02368,7.08358 -17.92822,7.08358c-7.46541,0 -9.47152,0.38538 -10.10336,1.94084c-1.01571,2.50047 1.0995,5.65643 4.14153,6.17922c3.07054,0.52769 17.86016,9.8254 18.63109,11.71273c0.32435,0.79406 -0.22236,4.02708 -1.21493,7.18448c-1.46184,4.65025 -2.64417,6.11892 -6.22405,7.7316c-4.22555,1.90353 -4.41998,2.2648 -4.4332,8.23857c-0.00763,3.43625 -0.36412,8.24978 -0.79227,10.6967l-0.7784,4.44896l-7.05704,-0.05308c-3.88133,-0.02919 -11.19694,-1.31932 -16.25691,-2.86695l-0.00001,0.00001z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(6)"
          />
          <path
            data-name="大同區"
            :class="{
              'active-district':
                targetDistrict === '大同區' ||
                selectedIndex === 7,
              'initial-animation-5': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['大同區'] / districtData.highest)"
            :fill="districtColor"
            d="m97.03006,356.57153c-1.29449,-0.81758 -1.31213,-1.71502 -0.0881,-4.48295c0.84171,-1.9034 1.68908,-8.26562 1.88302,-14.13825c0.19395,-5.87262 0.70148,-14.68157 1.12788,-19.57542c0.51691,-5.93249 0.15948,-11.66569 -1.0724,-17.20266c-1.01622,-4.5676 -1.67798,-8.47751 -1.47058,-8.68868c0.20739,-0.21117 3.39668,-0.77868 7.0873,-1.26111c3.69059,-0.48245 7.97908,-1.52829 9.52994,-2.32412c2.38615,-1.2245 3.59296,-1.03062 7.84926,1.26111c3.41883,1.84081 4.79379,3.27798 4.29333,4.48766c-2.57854,6.23259 -4.38137,19.15541 -3.64127,26.10057c1.56452,14.6817 1.35721,31.80498 -0.40502,33.45775c-0.90906,0.85262 -4.83536,1.61392 -8.79117,1.70458c-3.93157,0.09009 -8.84381,0.50581 -10.91602,0.92379c-2.0722,0.41798 -4.49597,0.29997 -5.38615,-0.26225l-0.00002,-0.00002z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(7)"
          />
          <path
            data-name="中正區"
            :class="{
              'active-district':
                targetDistrict === '中正區' ||
                selectedIndex === 8,
              'initial-animation-6': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['中正區'] / districtData.highest)"
            :fill="districtColor"
            d="m143.23236,439.51584c-3.38679,-1.1326 -6.0509,-3.76661 -11.6082,-11.47705c-6.32482,-8.77532 -8.01682,-10.32286 -13.74603,-12.57198c-3.81605,-1.49809 -6.93112,-3.58043 -7.48962,-5.00664c-0.52591,-1.34304 -2.30688,-2.76211 -3.95773,-3.15352c-1.65082,-0.39136 -5.10152,-3.08492 -7.66818,-5.98552l-4.66665,-5.27392l3.21827,-7.59915c1.76998,-4.17954 3.21819,-9.13106 3.21819,-11.00335c0,-5.38452 3.66235,-17.41135 5.75773,-18.90792c3.13362,-2.23811 22.27165,-0.75703 35.37236,2.73741l6.59338,1.75868l0,12.50494l0,12.50496l-4.70956,-0.82563c-2.59025,-0.45409 -5.60176,-1.58123 -6.69225,-2.50479c-1.0905,-0.9236 -2.38808,-1.67921 -2.88352,-1.67921c-1.62947,0 -7.03984,12.37811 -7.05237,16.13485c-0.01345,4.03191 4.56251,10.82258 13.11126,19.45682c2.90726,2.93633 7.96454,8.37581 11.23844,12.08768l5.95255,6.74895l-3.79195,1.85237c-4.38544,2.14232 -4.39333,2.1425 -10.19612,0.20198l0,0.00004z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(8)"
          />
          <path
            data-name="萬華區"
            :class="{
              'active-district':
                targetDistrict === '萬華區' ||
                selectedIndex === 9,
              'initial-animation-7': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['萬華區'] / districtData.highest)"
            :fill="districtColor"
            d="m69.35654,439.01584c-3.99535,-4.01755 -6.85931,-14.20691 -5.88131,-20.92438c0.71146,-4.8865 0.16193,-6.94596 -4.4707,-16.75562c-7.32389,-15.50848 -6.86423,-20.35735 2.21244,-23.34024c6.24697,-2.05295 25.82218,-13.2498 28.85199,-16.50311c2.29756,-2.46708 3.42474,-2.79986 7.21066,-2.12891c3.77363,0.66879 4.38912,1.19912 3.86957,3.33449c-3.97174,16.32418 -5.63624,22.22573 -7.36552,26.11531c-1.12335,2.5266 -2.04241,5.91194 -2.04241,7.52294c0,3.65896 7.55479,12.16471 12.57613,14.1592c4.53702,1.80213 4.9051,3.97696 0.67311,3.97696c-3.08587,0 -6.22744,3.01637 -16.02781,15.38922c-4.06656,5.13403 -12.76559,11.77778 -15.52676,11.85831c-0.74302,0.02168 -2.57875,-1.19519 -4.07941,-2.70417l0.00002,0z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(9)"
          />
          <path
            data-name="大安區"
            :class="{
              'active-district':
                targetDistrict === '大安區' ||
                selectedIndex === 10,
              'initial-animation-8': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['大安區'] / districtData.highest)"
            :fill="districtColor"
            d="m168.45407,444.15313c-4.80503,-0.53193 -5.89736,-1.20309 -8.16321,-5.01571c-2.8876,-4.85886 -9.81587,-13.18737 -21.79228,-26.19671c-4.33042,-4.70388 -8.21258,-9.77692 -8.62702,-11.27338c-0.41442,-1.49643 0.22251,-5.13516 1.41546,-8.08599c1.68409,-4.16567 2.63009,-5.18192 4.23143,-4.54548c4.57665,1.81898 12.15917,2.64938 13.63672,1.49349c0.96374,-0.75392 1.65879,-5.56891 1.88381,-13.05049l0.3566,-11.85575l17.58232,0.16651c9.67029,0.09158 20.30806,0.21585 23.63944,0.27617l6.05725,0.10967l-0.40578,16.38332l-0.40565,16.38323l-4.70955,4.55267c-5.20203,5.02876 -5.85305,7.68326 -2.45762,10.02073c3.10704,2.13897 16.02616,18.61792 17.97942,22.93376c0.87887,1.94189 2.71886,4.73189 4.08903,6.20007c4.20959,4.51108 -0.1374,2.99795 -5.96468,-2.0762c-2.99741,-2.61002 -6.43149,-4.74554 -7.63123,-4.74554c-1.19975,0 -3.72168,1.55766 -5.60438,3.46145c-2.43785,2.46538 -3.93806,3.15339 -5.21335,2.39094c-2.67142,-1.59711 -6.94168,-1.32626 -8.58527,0.54454c-1.93425,2.20169 -4.65503,2.66565 -11.31144,1.9287l-0.00002,0z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(10)"
          />
          <path
            data-name="信義區"
            :class="{
              'active-district':
                targetDistrict === '信義區' ||
                selectedIndex === 5,
              'initial-animation-9': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['信義區'] / districtData.highest)"
            :fill="districtColor"
            d="m215.28285,440.86964c-1.38524,-1.7944 -2.86881,-4.15278 -3.29669,-5.24081c-0.69475,-1.76696 -4.74132,-7.08608 -16.38786,-21.5417l-3.65596,-4.5377l4.15266,-4.88161l4.15283,-4.88163l0.23347,-15.49482c0.12834,-8.52222 0.29827,-16.35265 0.37751,-17.40101c0.0893,-1.18195 4.00124,-3.54828 10.29697,-6.22855c9.07851,-3.86504 11.26613,-4.32244 20.67356,-4.32244l10.52076,0l1.32169,4.6372c1.13506,3.98177 7.04436,10.55989 10.89828,12.13168c1.45568,0.59369 6.72172,10.6906 6.72322,12.89087c0.00063,0.97877 1.09526,3.47445 2.43227,5.54596l2.43113,3.76637l-3.37769,2.07076c-5.46371,3.34964 -10.28503,10.62703 -10.28503,15.52429c0,3.93759 -1.64232,6.56431 -7.8902,12.62008c-3.52513,3.41675 -7.29164,5.68758 -11.26198,6.78992c-3.28099,0.91094 -5.96543,2.11806 -5.96543,2.6825c0,0.91369 -8.2848,9.13322 -9.20574,9.13322c-0.20294,0 -1.5024,-1.46815 -2.88777,-3.26258z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(5)"
          />
          <path
            data-name="松山區"
            :class="{
              'active-district':
                targetDistrict === '松山區' ||
                selectedIndex === 4,
              'initial-animation-10': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['松山區'] / districtData.highest)"
            :fill="districtColor"
            d="m179.82896,364.76431l-7.98715,-1.28245l0.76585,-5.27829c0.42121,-2.90306 0.76582,-7.06518 0.76582,-9.24915c0,-3.3757 0.62493,-4.21752 4.16951,-5.61658c3.46477,-1.36757 4.65142,-2.89434 7.02097,-9.03348l2.8515,-7.38774l-3.40983,-3.36216c-3.68831,-3.63673 -17.05002,-11.82166 -19.29863,-11.82166c-0.75928,0 -1.38055,-0.53386 -1.38055,-1.18638c0,-0.67951 3.80903,-1.18639 8.91533,-1.18639c9.8254,0 16.88427,-2.35487 18.12457,-6.04643c1.01612,-3.02443 3.75466,-2.83866 11.26445,0.76415c7.47225,3.58477 10.10193,3.19325 16.4322,-2.44658c2.57166,-2.29123 4.79972,-4.02548 4.95106,-3.85387c1.5927,1.80567 4.36229,8.46276 4.36229,10.48566c0,1.41898 -1.42906,5.58826 -3.17587,9.26509l-3.17574,6.68513l2.54781,6.99582c1.4111,3.87457 2.54793,10.05324 2.54793,13.8485c0,5.96327 0.34938,6.95741 2.69147,7.65965c1.48043,0.44384 4.87407,0.12655 7.54156,-0.70507c5.21932,-1.6272 6.83902,-1.11599 5.66001,1.7864c-0.58964,1.45168 -2.95735,1.83075 -11.4353,1.83075c-9.84773,0 -11.56089,0.37949 -21.70337,4.80755c-12.38575,5.40747 -17.53862,6.17518 -29.0459,4.32753l0.00001,0z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(4)"
          />
          <path
            data-name="南港區"
            :class="{
              'active-district':
                targetDistrict === '南港區' ||
                selectedIndex === 3,
              'initial-animation-11': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['南港區'] / districtData.highest)"
            :fill="districtColor"
            d="m243.35694,435.10525c-1.9745,-1.86522 -0.67078,-4.50767 4.68505,-9.49557c3.87691,-3.61055 5.84964,-6.57613 6.42396,-9.65696c1.02467,-5.49769 7.44762,-15.36892 10.61885,-16.31971c3.22409,-0.96672 4.38566,-5.03692 2.13738,-7.49036c-1.00357,-1.09514 -2.18749,-3.85973 -2.63094,-6.14353c-1.12917,-5.81569 -6.09919,-15.42307 -7.97836,-15.42307c-2.89757,0 -9.39549,-6.5789 -11.08604,-11.22403c-2.56953,-7.06084 -1.19207,-11.06281 4.29713,-12.48485c7.84284,-2.03178 14.1186,-6.46724 17.59538,-12.43569c4.18384,-7.18234 6.85259,-7.12763 4.52004,0.09267c-1.11334,3.44608 1.99811,4.35706 7.48493,2.19139c2.41229,-0.95213 6.36605,-1.73119 8.78613,-1.73119c6.05661,0 17.2931,-4.91633 19.93209,-8.72102c2.50172,-3.60688 4.62491,-4.0936 4.65291,-1.06669c0.01545,1.6604 0.24137,1.74489 1.12815,0.42184c1.6633,-2.48134 9.51845,2.5056 11.53264,7.3216c0.87936,2.10312 1.82428,4.22427 2.09958,4.71366c0.27516,0.48938 -0.73834,0.88979 -2.25231,0.88979c-2.3034,0 -2.62491,0.48033 -1.97034,2.94389c0.64904,2.44308 0.0339,3.40172 -3.61594,5.63534c-3.74278,2.29032 -4.40047,3.36046 -4.41366,7.17987c-0.01369,3.91359 3.12839,11.02396 8.18119,18.51439c3.18967,4.72868 9.19392,9.24778 14.09512,10.60878c2.93562,0.81517 5.33749,1.99463 5.33749,2.62094c0,0.62629 1.27158,1.15048 2.82574,1.16482c3.29467,0.03037 10.52729,3.25616 18.52423,8.26186c3.1083,1.94564 6.49918,3.91352 7.53528,4.37304c1.0361,0.45954 2.44897,1.5366 3.1397,2.39351c0.81243,1.00783 4.80387,1.66225 11.30293,1.85312c8.87405,0.26063 10.50694,-0.03102 13.98637,-2.49808c5.25384,-3.72515 11.75918,-2.74094 11.75918,1.77902c0,1.62233 -0.57783,3.9697 -1.28413,5.21635c-1.35397,2.39003 -1.17778,2.38682 -19.84329,0.35818c-5.64657,-0.61368 -7.26126,-0.32396 -10.39618,1.86553l-3.71126,2.59205l-3.26403,-2.42549c-2.71961,-2.02084 -4.36896,-2.30276 -9.88767,-1.69004c-5.03873,0.5594 -7.32116,0.27381 -9.53905,-1.19374c-5.46547,-3.61634 -8.4988,-2.55762 -11.36974,3.96856c-1.42995,3.25055 -3.6536,6.21521 -4.95395,6.6051c-1.29769,0.38906 -2.35942,1.1196 -2.35942,1.62341c0,3.4568 -15.81052,3.94748 -17.19714,0.53373c-0.37752,-0.92963 -2.50486,-1.60964 -5.03533,-1.60964c-2.40966,0 -6.06076,-0.93428 -8.11337,-2.07618c-3.55414,-1.97733 -3.79063,-1.97733 -4.96575,0c-0.71334,1.20029 -2.7073,2.07618 -4.72676,2.07618c-3.51771,0 -5.28123,1.99957 -7.06282,8.00814c-0.54317,1.83177 -1.75019,2.66937 -3.84663,2.66937c-1.68025,0 -3.05507,-0.59924 -3.05507,-1.33165c0,-0.92875 -0.47497,-0.96046 -1.56985,-0.10474c-0.86342,0.67481 -2.98271,1.22425 -4.70954,1.22101c-4.08011,-0.00766 -9.32743,0.84163 -10.91046,1.76585c-0.68823,0.40183 -4.30768,1.24055 -8.0433,1.86382c-3.73549,0.62329 -7.93641,1.47563 -9.33545,1.89414c-1.39906,0.41851 -2.95321,0.37406 -3.45367,-0.09873l0,0.00001z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(3)"
          />
          <path
            data-name="文山區"
            :class="{
              'active-district':
                targetDistrict === '文山區' ||
                selectedIndex === 11,
              'initial-animation-12': true,
            }"
            :fill-opacity="Math.max(0.12, districtData['文山區'] / districtData.highest)"
            :fill="districtColor"
            d="m273.73329,544.82851c-2.66761,-3.53892 -3.09436,-3.67667 -9.46544,-3.0555c-5.44537,0.53092 -8.4257,0.0126 -16.21028,-2.81912c-11.22179,-4.08199 -16.34755,-4.45609 -17.23294,-1.25762c-1.15956,4.18857 -16.49035,4.64589 -23.10456,0.68922c-1.48608,-0.88898 -3.68878,-4.17441 -4.8948,-7.30096c-1.20602,-3.12651 -4.03627,-9.26332 -6.28933,-13.63732c-3.62459,-7.03621 -4.01957,-8.75667 -3.42692,-14.92986c0.82888,-8.63635 -0.83904,-12.11591 -5.80804,-12.11591c-2.92325,0 -3.69666,0.6149 -4.28829,3.40936c-1.36845,6.46378 -8.38332,5.58925 -8.38332,-1.04518c0,-3.07925 -0.41373,-3.32601 -6.84909,-4.08557c-7.28516,-0.85987 -7.29944,-0.87495 -8.80904,-9.31511c-0.44381,-2.48122 -1.61257,-4.80335 -2.59725,-5.16032c-1.84369,-0.66834 -6.75838,4.08343 -11.13665,10.76759c-3.04779,4.65283 -4.18177,2.05389 -1.37782,-3.15772c4.37214,-8.12651 6.87571,-18.10421 6.89192,-27.46718c0.01297,-7.51126 0.45036,-9.67165 2.21399,-10.93637c2.88265,-2.06714 5.33749,-2.06662 5.33749,0.00117c0,2.07889 1.65756,2.67309 10.30296,3.69353c5.12909,0.60532 7.89276,0.34704 10.63883,-0.99444c2.44872,-1.19625 5.48635,-1.58716 8.93608,-1.15004c4.717,0.59764 5.3423,0.3741 6.41621,-2.29436c1.91496,-4.7581 4.67275,-4.83831 9.50199,-0.27631c3.66692,3.46411 5.24016,4.11452 9.95235,4.11452c5.55576,0 11.29364,-3.13079 15.49354,-8.45381c2.41469,-3.06055 7.52097,-3.74377 11.47775,-1.53579c3.23917,1.80755 4.1964,1.80138 13.44483,-0.08629c17.87734,-3.64889 21.04039,-4.17084 21.66984,-3.57617c0.3416,0.32251 -0.03491,2.65388 -0.83629,5.18073c-1.7777,5.60529 -1.92363,16.77605 -0.21903,16.77605c0.68095,0 2.73519,2.13703 4.56488,4.74895c3.28262,4.68585 3.29945,4.81637 1.27372,9.82739c-2.94793,7.29175 -2.62341,12.00709 1.08658,15.78872c3.71377,3.78552 3.69531,3.68482 1.11913,6.11849c-1.5401,1.45495 -1.88107,3.47986 -1.43384,8.51658c0.32275,3.63433 0.03001,7.76967 -0.65056,9.18971c-3.16984,6.61434 4.47721,12.22514 19.16286,14.0602c7.12561,0.89036 19.36392,6.51175 20.55375,9.44085c0.48966,1.2057 -1.16132,2.01536 -6.07471,2.97896c-3.71112,0.72779 -9.0191,2.8778 -11.79561,4.77777c-2.77649,1.90001 -6.59487,3.82128 -8.48535,4.26948c-1.89034,0.44821 -4.88764,1.53003 -6.66043,2.40401c-5.72707,2.82328 -10.87919,2.05011 -14.0091,-2.10233l-0.00001,0z"
            @mouseenter="toggleActive"
            @mousemove="updateMouseLocation"
            @mouseleave="toggleActiveToNull"
            @click="handleDataSelection(11)"
          />
        </g>
      </svg>
      <Teleport to="body">
        <div
          v-if="targetDistrict"
          class="districtchart-chart-info chart-tooltip"
          :style="tooltipPosition"
        >
          <h6>{{ targetDistrict }}</h6>
          <span>{{ districtData[targetDistrict] }}
            {{ chart_config.unit }}</span>
        </div>
      </Teleport>
    </div>
  </div>
</template>

<style scoped lang="scss">
* {
	margin: 0;
	padding: 0;
	font-family: "微軟正黑體", "Microsoft JhengHei", "Droid Sans", "Open Sans",
		"Helvetica";
	overflow: hidden;
}

.districtchart {
	// height: 100%;
	max-height: 100%;
	position: relative;
	overflow-y: scroll;

	&-title {
		display: flex;
		flex-direction: column;
		justify-content: center;
		position: absolute;
		left: 0;
		top: 0;
		margin: 0.5rem 0 -0.5rem;

		h5 {
			color: var(--color-complement-text);
		}

		h6 {
			color: var(--color-complement-text);
			font-size: var(--font-m);
			font-weight: 400;
		}

		&-legend {
			display: flex;
			justify-content: space-between;

			div {
				position: relative;
				width: 3rem;
				margin: 0 4px;
				border-radius: 5px;
			}

			div:before {
				content: "";
				width: 3rem;
				height: var(--font-l);
				position: absolute;
				top: 0;
				left: 0;
				background: linear-gradient(
					270deg,
					rgba(40, 42, 44, 1),
					rgba(40, 42, 44, 0.2)
				);
			}

			p {
				font-size: var(--font-s);
				color: var(--color-complement-text);
			}
		}
	}

	&-chart {
		// height: 100%;
		display: flex;
		justify-content: center;

		svg {
			height: auto;

			path {
				transition: transform 0.2s;
				// opacity: 0;
			}
		}

		&-taipei {
			width: 47%;
		}

		&-metrotaipei {
			width: 100%;
			transform: translateX(40px);
		}

		&-info {
			position: fixed;
			z-index: 20;
		}
	}
}

.active-district {
	transform: translateY(-5px);
}

@keyframes ease-in {
	0% {
		opacity: 0;
	}

	100% {
		opacity: 1;
	}
}

@for $i from 1 through 42 {
	.initial-animation-#{$i} {
		animation-name: ease-in;
		animation-duration: 0.2s;
		animation-delay: 0.05s * ($i - 1);
		animation-timing-function: linear;
		animation-fill-mode: forwards;
	}
}
</style>

